import sys
import base64
exec(base64.b64decode('aW1wb3J0IHhibWNndWkKaW1wb3J0IHhibWNwbHVnaW4KaW1wb3J0IHhibWMKaW1wb3J0IHVybGxpYgppbXBvcnQgdXJsbGliMgppbXBvcnQgdXJscGFyc2UKaW1wb3J0IGpzb24KaW1wb3J0IHhibWNhZGRvbgppbXBvcnQgb3MKaW1wb3J0IHJlCmltcG9ydCByYW5kb20KaW1wb3J0IHJlcXVlc3RzCmltcG9ydCB1bmljb2RlZGF0YQpmcm9tIGxpYiBpbXBvcnQgeW91dHViZV9kbApmcm9tIHNxbGl0ZTMgaW1wb3J0IGRiYXBpMiBhcyBkYXRhYmFzZQpmcm9tIHR5cGVzIGltcG9ydCBVbmljb2RlVHlwZQpmcm9tIEY0bVByb3h5IGltcG9ydCBmNG1Qcm94eUhlbHBlcgpsbGxsbGxsbGxsPXN5cy5hcmd2WzBdCmxsbGwxMTFsbGw9aW50KHN5cy5hcmd2WzFdKQpsbDExMTExMWxsPXVybHBhcnNlLnBhcnNlX3FzKHN5cy5hcmd2WzJdWzE6XSkKbGxsbGxsbGwxMT14Ym1jYWRkb24uQWRkb24oKQpsbGwxMWwxbGxsPWxsbGxsbGxsMTEuZ2V0QWRkb25JbmZvKCdwYXRoJykKc3lzLnBhdGguYXBwZW5kKHhibWMudHJhbnNsYXRlUGF0aChvcy5wYXRoLmpvaW4obGxsMTFsMWxsbCwnbGliJykpKQpsbGxsbGxsbGwxPW9zLnBhdGguam9pbih4Ym1jLnRyYW5zbGF0ZVBhdGgoInNwZWNpYWw6Ly9kYXRhYmFzZSIpLCdhdHJlc3BsYXllci5kYicpCmxsbDExbGxsbGw9ZGF0YWJhc2UuY29ubmVjdChsbGxsbGxsbGwxKQpsbDFsbGxsbGxsPWxsbDExbGxsbGwuY3Vyc29yKCkKZGVmIGxsbGxsbGxsMWwobGxsbDExMTExbCk6CiAgICB0cnk6CiAgICAgICAgbGxsbDExMTExbD11bmljb2RlKGxsbGwxMTExMWwuZW5jb2RlKCJ1dGYtOCIpLCd1dGYtOCcpCiAgICBleGNlcHQgTmFtZUVycm9yOgogICAgICAgIHBhc3MKICAgIGxsbGwxMTExMWw9dW5pY29kZWRhdGEubm9ybWFsaXplKCdORkQnLGxsbGwxMTExMWwpXAogICAgICAgICAgIC5lbmNvZGUoJ2FzY2lpJywnaWdub3JlJylcCiAgICAgICAgICAgLmRlY29kZSgidXRmLTgiKQogICAgcmV0dXJuIHN0cihsbGxsMTExMTFsKQpkZWYgbGwxMWwxbGxsbChsMWwxbGxsbGxsKToKICAgIGxsbGxsbGwxbGw9bGxsbGxsbGwxbChsMWwxbGxsbGxsKQogICAgbGxsbGxsbDFsbD1yZS5zdWIocidbI1xcLzoiKj88PnxdKycsIiIsbGxsbGxsbDFsbCkKICAgIGxsbGxsbGwxbGw9IiIuam9pbihpIGZvciBpIGluIGxsbGxsbGwxbGwgaWYgb3JkKGkpPDEyOCkKICAgIGxsbGxsbGwxbGw9JyAnLmpvaW4obGxsbGxsbDFsbC5zcGxpdCgpKQogICAgcmV0dXJuIGxsbGxsbGwxbGwKZGVmIGxsMWwxbGxsbGwobDFsMWxsbGxsbCk6CiAgICByZXR1cm4gbGxsbGxsMWxsbChsMWwxbGxsbGxsKS5lbmNvZGUoJ3V0Zi04JykKZGVmIGxsbGxsbDFsbGwobGxsbGwxbGxsbCk6CiAgICBpZiB0eXBlKGxsbGxsMWxsbGwpIGlzIFVuaWNvZGVUeXBlOgogICAgICAgIHJldHVybiBsbGxsbDFsbGxsCiAgICBlbHNlOgogICAgICAgIHRyeToKICAgICAgICAgICAgcmV0dXJuIHVuaWNvZGUobGxsbGwxbGxsbCwndXRmLTgnKQogICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgcmV0dXJuIHVuaWNvZGUobGxsbGwxbGxsbCwnaXNvLTg4NTktMScpCmRlZiBsbGxsbDExbDFsKGxsbGxsbDExbDEpOgogICAgcmV0dXJuIGxsbGxsbGxsbGwrJz8nK3VybGxpYi51cmxlbmNvZGUobGxsbGxsMTFsMSkKZGVmIGxsbGxsbDExbGwobGwxMWxsbGxsbCxsbGxsbDExbGxsKToKICAgIGlmIGxsbGxsMTFsbGw9PTM6CiAgICAgICAgcmV0dXJuICcnCiAgICBlbHNlOgogICAgICAgIGxsbGwxMWxsbGw9MAogICAgICAgIGxsMTFsbGxsbGw9bGwxMWxsbGxsbC5yZXBsYWNlKCcgJywnJTIwJykKICAgICAgICBsbDFsbGxsbGxsLmV4ZWN1dGUoIkNSRUFURSBUQUJMRSBJRiBOT1QgRVhJU1RTIGxpbmtzIChwYWdlX2xpbmsgVEVYVCwgcmV0dXJuX2xpbmsgVEVYVCwgVU5JUVVFKHBhZ2VfbGluaykpOyIpCiAgICAgICAgbGxsMTFsbGxsbC5jb21taXQoKQogICAgICAgIGxsMWxsbGxsbGwuZXhlY3V0ZSgiU0VMRUNUIHJldHVybl9saW5rIEZST00gbGlua3MgV0hFUkUgcGFnZV9saW5rID0gJyIrbGwxMWxsbGxsbCsiJyIpCiAgICAgICAgbDFsbGxsbGxsbD1sbDFsbGxsbGxsLmZldGNob25lKCkKICAgICAgICBpZiBsMWxsbGxsbGxsICE9IE5vbmU6CiAgICAgICAgICAgIHhibWMuc2xlZXAoNzUwKQogICAgICAgICAgICByZXR1cm4gbDFsbGxsbGxsbFswXQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGlmIGxsbGxsbGxsMTEuZ2V0U2V0dGluZygndXNlcm5hbWUnKT09Jycgb3IgbGxsbGxsbGwxMS5nZXRTZXR0aW5nKCdwYXNzd29yZCcpPT0nJzoKICAgICAgICAgICAgICAgIGxsbGwxMWxsbGw9MQogICAgICAgICAgICBlbHNlOgogICAgICAgICAgICAgICAgdHJ5OgogICAgICAgICAgICAgICAgICAgIGwxMWxsbGxsbGw9eW91dHViZV9kbC5Zb3V0dWJlREwoeydvdXR0bXBsJzp1JyUoaWQpcyUoZXh0KXMnLCd1c2VybmFtZSc6bGxsbGxsbGwxMS5nZXRTZXR0aW5nKCd1c2VybmFtZScpLCdwYXNzd29yZCc6bGxsbGxsbGwxMS5nZXRTZXR0aW5nKCdwYXNzd29yZCcpfSkKICAgICAgICAgICAgICAgICAgICBsbGxsbGxsMTExPWwxMWxsbGxsbGwuZXh0cmFjdF9pbmZvKGxsMTFsbGxsbGwsZG93bmxvYWQ9RmFsc2UpCiAgICAgICAgICAgICAgICAgICAgaWYgJ2VudHJpZXMnIGluIGxsbGxsbGwxMTE6CiAgICAgICAgICAgICAgICAgICAgICAgIGxsbGxsbGwxMWw9bGxsbGxsbDExMVsnZW50cmllcyddWzBdCiAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgbGxsbGxsbDExbD1sbGxsbGxsMTExCiAgICAgICAgICAgICAgICAgICAgbGxsbDFsbGxsbD1qc29uLmR1bXBzKGxsbGxsbGwxMWwpCiAgICAgICAgICAgICAgICAgICAgbGxsbGxsMTExbD1sbGxsMWxsbGxsLnNwbGl0KCcubTN1OCcpCiAgICAgICAgICAgICAgICAgICAgbGxsbDExbDExbD1sbGxsbGwxMTFsW2xlbihsbGxsbGwxMTFsKS0yXS5zcGxpdCgnIicpCiAgICAgICAgICAgICAgICAgICAgbGxsMTFsMTFsbD1sbGxsbGwxMTFsW2xlbihsbGxsbGwxMTFsKS0xXS5zcGxpdCgnIicpCiAgICAgICAgICAgICAgICAgICAgbGxsMWxsbGxsbD1sbGxsMTFsMTFsW2xlbihsbGxsMTFsMTFsKS0xXSsnLm0zdTgnCiAgICAgICAgICAgICAgICAgICAgbGwxbGxsbGxsbC5leGVjdXRlKCJJTlNFUlQgSU5UTyBsaW5rcyBWQUxVRVMgKCciK2xsMTFsbGxsbGwrIicsICciK2xsbDFsbGxsbGwrIicpOyIpCiAgICAgICAgICAgICAgICAgICAgbGxsMTFsbGxsbC5jb21taXQoKQogICAgICAgICAgICAgICAgICAgIHJldHVybiBsbGwxbGxsbGxsCiAgICAgICAgICAgICAgICBleGNlcHQgRXhjZXB0aW9uIGFzIGU6CiAgICAgICAgICAgICAgICAgICAgbGxsbDExbGxsbD0xCiAgICAgICAgICAgIGlmIGxsbGwxMWxsbGw9PTE6CiAgICAgICAgICAgICAgICBsMTExMTExMTFsPXsnU2VjLUZldGNoLU1vZGUnOidjb3JzJywnT3JpZ2luJzonaHR0cHM6Ly9lbGphdmllcm8uY29tJywnQWNjZXB0LUxhbmd1YWdlJzonZXMtRVMsZXM7cT0wLjknLCdYLVJlcXVlc3RlZC1XaXRoJzonWE1MSHR0cFJlcXVlc3QnLCdDb25uZWN0aW9uJzona2VlcC1hbGl2ZScsJ1ByYWdtYSc6J25vLWNhY2hlJywnVXNlci1BZ2VudCc6J01vemlsbGEvNS4wIChYMTE7IExpbnV4IHg4Nl82NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzc3LjAuMzg2NS4xMjAgU2FmYXJpLzUzNy4zNicsJ0NvbnRlbnQtVHlwZSc6J2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZDsgY2hhcnNldD1VVEYtOCcsJ0FjY2VwdCc6JyovKicsJ0NhY2hlLUNvbnRyb2wnOiduby1jYWNoZScsJ1JlZmVyZXInOidodHRwczovL2VsamF2aWVyby5jb20vZGVzY2FyZ2FydmlkZW9zZGVsYXRlbGUvZG93bmxvYWQvJywnU2VjLUZldGNoLVNpdGUnOidzYW1lLW9yaWdpbid9CiAgICAgICAgICAgICAgICBsMTExMTExMTExPXVybGxpYi51cmxlbmNvZGUoeyd1cmxfbm90aWNpYSc6bGwxMWxsbGxsbCwnc3VibWl0X2Vudmlhcl91cmwnOidvaycsJ2N1cnJlbnRfdXJsJzonaHR0cHM6Ly9lbGphdmllcm8uY29tL2Rlc2NhcmdhcnZpZGVvc2RlbGF0ZWxlL2Rvd25sb2FkLyd9KQogICAgICAgICAgICAgICAgbGwxMTExbGxsbD11cmxsaWIyLlJlcXVlc3QoImh0dHBzOi8vZWxqYXZpZXJvLmNvbS9kZXNjYXJnYXJ2aWRlb3NkZWxhdGVsZS9pbmRleC5waHAiLGRhdGE9bDExMTExMTExMSxoZWFkZXJzPWwxMTExMTExMWwpCiAgICAgICAgICAgICAgICBsbDExbDExbGxsPWpzb24ubG9hZHModXJsbGliMi51cmxvcGVuKGxsMTExMWxsbGwsdGltZW91dD02MCkucmVhZCgpKQogICAgICAgICAgICAgICAgaWYgJ3BydWViYSBkZSBudWV2bycgaW4gbGwxMWwxMWxsbFsnbWVuc2FqZSddOgogICAgICAgICAgICAgICAgICAgIGxsbGxsMTFsbGw9bGxsbGwxMWxsbCsxCiAgICAgICAgICAgICAgICBlbGlmICdubyBwYXJlY2UgcXVlIGhheWEgdW5hJyBpbiBsbDExbDExbGxsWydtZW5zYWplJ106CiAgICAgICAgICAgICAgICAgICAgbGxsbGwxMWxsbD1sbGxsbDExbGxsKzEKICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgbGxsbGxsMTExbD1sbDExbDExbGxsWydtZW5zYWplJ10uc3BsaXQoJy5mNG08L2Rpdj4nKQogICAgICAgICAgICAgICAgICAgIGxsbGwxMWwxMWw9bGxsbGxsMTExbFswXS5zcGxpdCgnPicpCiAgICAgICAgICAgICAgICAgICAgbGwxMWwxMTFsbD1sbGxsMTFsMTFsWy0xXSsnLmY0bScKICAgICAgICAgICAgICAgICAgICBpZiBsbDExbDExMWxsPT0nLmY0bSc6CiAgICAgICAgICAgICAgICAgICAgICAgIGxsbGxsbDExMWw9bGwxMWwxMWxsbFsnbWVuc2FqZSddLnNwbGl0KCc8YSBocmVmPSInKQogICAgICAgICAgICAgICAgICAgICAgICBsbGxsMTFsMTFsPWxsbGxsbDExMWxbM10uc3BsaXQoJyInKQogICAgICAgICAgICAgICAgICAgICAgICBsMTExMTExMTFsPXsnU2VjLUZldGNoLU1vZGUnOidjb3JzJywnT3JpZ2luJzonaHR0cHM6Ly9lbGphdmllcm8uY29tJywnQWNjZXB0LUxhbmd1YWdlJzonZXMtRVMsZXM7cT0wLjknLCdYLVJlcXVlc3RlZC1XaXRoJzonWE1MSHR0cFJlcXVlc3QnLCdDb25uZWN0aW9uJzona2VlcC1hbGl2ZScsJ1ByYWdtYSc6J25vLWNhY2hlJywnVXNlci1BZ2VudCc6J01vemlsbGEvNS4wIChYMTE7IExpbnV4IHg4Nl82NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzc3LjAuMzg2NS4xMjAgU2FmYXJpLzUzNy4zNicsJ0NvbnRlbnQtVHlwZSc6J2FwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZDsgY2hhcnNldD1VVEYtOCcsJ0FjY2VwdCc6JyovKicsJ0NhY2hlLUNvbnRyb2wnOiduby1jYWNoZScsJ1JlZmVyZXInOmxsbGwxMWwxMWxbMF0sJ1NlYy1GZXRjaC1TaXRlJzonc2FtZS1vcmlnaW4nfQogICAgICAgICAgICAgICAgICAgICAgICBsMTExMTExMTExPXVybGxpYi51cmxlbmNvZGUoeyd1cmxfbm90aWNpYSc6bGwxMWxsbGxsbCwnc3VibWl0X2Vudmlhcl91cmwnOidvaycsJ2N1cnJlbnRfdXJsJzpsbGxsMTFsMTFsWzBdfSkKICAgICAgICAgICAgICAgICAgICAgICAgbGwxMTExbGxsbD11cmxsaWIyLlJlcXVlc3QoImh0dHBzOi8vZWxqYXZpZXJvLmNvbS9kZXNjYXJnYXJ2aWRlb3NkZWxhdGVsZS9pbmRleC5waHAiLGRhdGE9bDExMTExMTExMSxoZWFkZXJzPWwxMTExMTExMWwpCiAgICAgICAgICAgICAgICAgICAgICAgIGxsMTFsMTFsbGw9anNvbi5sb2Fkcyh1cmxsaWIyLnVybG9wZW4obGwxMTExbGxsbCx0aW1lb3V0PTYwKS5yZWFkKCkpCiAgICAgICAgICAgICAgICAgICAgICAgIGlmICdwcnVlYmEgZGUgbnVldm8nIGluIGxsMTFsMTFsbGxbJ21lbnNhamUnXToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxsbGxsMTFsbGw9bGxsbGwxMWxsbCsxCiAgICAgICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsbGxsbGwxMTFsPWxsMTFsMTFsbGxbJ21lbnNhamUnXS5zcGxpdCgnLm0zdTgnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGxsbDExbDExbD1sbGxsbGwxMTFsWzBdLnNwbGl0KCc+JykKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxsbDExbDExbGw9bGxsbGxsMTExbFsxXS5zcGxpdCgnPCcpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsbGwxMWwxMTExPWxsbGwxMWwxMWxbLTFdKycubTN1OCcrbGxsMTFsMTFsbFswXQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbDExbDExMWxsbD1sbGwxMWwxMTExLnJlcGxhY2UoJy92Y2dkcm0vJywnL3ZjZy8nKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgbGwxbGxsbGxsbC5leGVjdXRlKCJJTlNFUlQgSU5UTyBsaW5rcyBWQUxVRVMgKCciK2xsMTFsbGxsbGwrIicsICciK2wxMWwxMTFsbGwrIicpOyIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsbGwxMWxsbGxsLmNvbW1pdCgpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbDExbDExMWxsbAogICAgICAgICAgICAgICAgICAgIGVsc2U6CiAgICAgICAgICAgICAgICAgICAgICAgIGxsMWxsbGxsbGwuZXhlY3V0ZSgiSU5TRVJUIElOVE8gbGlua3MgVkFMVUVTICgnIitsbDExbGxsbGxsKyInLCAnIitsbDExbDExMWxsKyInKTsiKQogICAgICAgICAgICAgICAgICAgICAgICBsbGwxMWxsbGxsLmNvbW1pdCgpCiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBsbDExbDExMWxsCiAgICAgICAgICAgICAgICBpZiBsbGxsbDExbGxsID4gMDoKICAgICAgICAgICAgICAgICAgICB4Ym1jLnNsZWVwKHJhbmRvbS5yYW5kaW50KDEwMCw2NTApKQogICAgICAgICAgICAgICAgICAgIHJldHVybiBsbGxsbGwxMWxsKGxsMTFsbGxsbGwsbGxsbGwxMWxsbCkKbGxsMTExbGxsbD1sbDExMTExMWxsLmdldCgnbGxsMTExbGxsbCcsTm9uZSkKaWYgbGxsMTExbGxsbCBpcyBOb25lOgogICAgbGwxMTExbGxsbD11cmxsaWIyLlJlcXVlc3QoJ2h0dHBzOi8vd3d3LmF0cmVzcGxheWVyLmNvbS8nKQogICAgbGwxMWwxMTExbD11cmxsaWIyLnVybG9wZW4obGwxMTExbGxsbCkucmVhZCgpCiAgICBsMTFsMTExMWxsPVtdCiAgICBsbGxsbGwxMTFsPWxsMTFsMTExMWwuc3BsaXQoJ1NpdGVOYXZpZ2F0aW9uRWxlbWVudCIsIm5hbWUiOiInKQogICAgZm9yIGxsMTFsMTExMTEgaW4gcmFuZ2UoMSxsZW4obGxsbGxsMTExbCkpOgogICAgICAgIGxsbGwxMWwxMWw9bGxsbGxsMTExbFtsbDExbDExMTExXS5zcGxpdCgnIicpCiAgICAgICAgbGxsMTFsMTFsbD1sbGxsbGwxMTFsW2xsMTFsMTExMTFdLnNwbGl0KCcsInVybCI6IicpCiAgICAgICAgbGxsMTFsMTExbD1sbGwxMWwxMWxsWzFdLnNwbGl0KCciJykKICAgICAgICBsMTFsMTExMWxsLmFwcGVuZCh7J2xsbGwxMWwxMTEnOmxsMWwxbGxsbGwobGxsbDExbDExbFswXSksJ2xsbGwxMWwxbGwnOmxsbDExbDExMWxbMF0ucmVwbGFjZSgnXFx1MDAyRicsJy8nKX0pCiAgICBmb3IgbGxsbGwxMTFsbCBpbiBsMTFsMTExMWxsOgogICAgICAgIGxsbGwxMWwxbGw9bGxsbGwxMWwxbCh7J2xsbDExMWxsbGwnOidsMUlsMUlsbGxsJywnbDExMTExMWxsbCc6bGxsbGwxMTFsbFsnbGxsbDExbDExMSddLCdsbDExMTExMTExJzpsbGxsbDExMWxsWydsbGxsMTFsMWxsJ119KQogICAgICAgIGwxMWwxMWxsbGw9eGJtY2d1aS5MaXN0SXRlbShsbGxsbDExMWxsWydsbGxsMTFsMTExJ10saWNvbkltYWdlPWxsbDExbDFsbGwrJy9pY29uLnBuZycpCiAgICAgICAgbDExbDExbGxsbC5zZXRJbmZvKHR5cGU9IlZpZGVvIixpbmZvTGFiZWxzPXsicGxvdCI6bGxsbGwxMTFsbFsnbGxsbDExbDExMSddfSkKICAgICAgICBsMTFsMTFsbGxsLnNldEFydCh7J2ZhbmFydCc6bGxsMTFsMWxsbCsnL2ZhbmFydC5qcGcnfSkKICAgICAgICB4Ym1jcGx1Z2luLmFkZERpcmVjdG9yeUl0ZW0oaGFuZGxlPWxsbGwxMTFsbGwsdXJsPWxsbGwxMWwxbGwsbGlzdGl0ZW09bDExbDExbGxsbCxpc0ZvbGRlcj1UcnVlKQogICAgeGJtY3BsdWdpbi5lbmRPZkRpcmVjdG9yeShsbGxsMTExbGxsKQplbGlmIGxsbDExMWxsbGxbMF09PSdsMUlsMUlsbGxsJzoKICAgIGxsMTExMWxsbGw9dXJsbGliMi5SZXF1ZXN0KGxsMTExMTExbGxbJ2xsMTExMTExMTEnXVswXSkKICAgIGxsMTExbGxsbGw9dXJsbGliMi51cmxvcGVuKGxsMTExMWxsbGwpLnJlYWQoKQogICAgbGxsbGxsMTExbD1sbDExMWxsbGxsLnNwbGl0KCcicmVkaXJlY3QiOmZhbHNlLCJocmVmIjoiJykKICAgIGxsbGwxMWwxMWw9bGxsbGxsMTExbFsxXS5zcGxpdCgnIicpCiAgICBsbGwxMWwxMWxsPWxsbGwxMWwxMWxbMF0uc3BsaXQoJ2NoYW5uZWxcdTAwMkYnKQogICAgbGxsMTFsMTExbD1sbGwxMWwxMWxsWzFdLnNwbGl0KCc/JykKICAgIGwxMTFsbGxsbGw9bGxsMTFsMTExbFswXQogICAgbDExbDExMTFJMT1sbGxsMTFsMTFsWzBdLnNwbGl0KCdjYXRlZ29yeUlkPScpCiAgICBsbGwxbDFsbGxsPWwxMWwxMTExSTFbMV0KICAgIGxsMTExMWxsbGw9dXJsbGliMi5SZXF1ZXN0KCdodHRwczovL2FwaS5hdHJlc3BsYXllci5jb20vY2xpZW50L3YxL3Jvdy9zZWFyY2g/ZW50aXR5VHlwZT1BVFBGb3JtYXQmc2VjdGlvbkNhdGVnb3J5PXRydWUmbWFpbkNoYW5uZWxJZD0nK2wxMTFsbGxsbGwrJyZjYXRlZ29yeUlkPScrbGxsMWwxbGxsbCsnJnNvcnRUeXBlPUFaJnNpemU9MTAwJnBhZ2U9MCcpCiAgICBsbGxsbGwxMTExPWpzb24ubG9hZHModXJsbGliMi51cmxvcGVuKGxsMTExMWxsbGwpLnJlYWQoKSkKICAgIGwxMTExMTExbGw9W10KICAgIGZvciBsbGxsbDExMWxsIGluIGxsbGxsbDExMTFbJ2l0ZW1Sb3dzJ106CiAgICAgICAgbDExMTExMTFsbC5hcHBlbmQoeyJsbGxsMWwxbGxsIjpsbGxsbDExMWxsWydmb3JtYXRJZCddLCJsMTExMTExbGxsIjpsbDFsMWxsbGxsKGxsbGxsMTExbGxbJ3RpdGxlJ10pLCJsbGxsbDFsMWxsIjpsbGxsbDExMWxsWydpbWFnZSddWydwYXRoSG9yaXpvbnRhbCddLCJsbDExMTExMTExIjpsbDFsMWxsbGxsKGxsbGxsMTExbGxbJ2xpbmsnXVsndXJsJ10pLCJsbGwxMTExMTExIjpsbDExbDFsbGxsKGxsbGxsMTExbGxbJ3RpdGxlJ10pLmxvd2VyKCl9KQogICAgbGxsbGwxMTExbD1pbnQobGxsbGxsMTExMVsncGFnZUluZm8nXVsndG90YWxQYWdlcyddKQogICAgaWYgbGxsbGwxMTExbCA+IDA6CiAgICAgICAgZm9yIGxsMTFsMTExMTEgaW4gcmFuZ2UoMSxsbGxsbDExMTFsKToKICAgICAgICAgICAgbGwxMTExbGxsbD11cmxsaWIyLlJlcXVlc3QoJ2h0dHBzOi8vYXBpLmF0cmVzcGxheWVyLmNvbS9jbGllbnQvdjEvcm93L3NlYXJjaD9lbnRpdHlUeXBlPUFUUEZvcm1hdCZzZWN0aW9uQ2F0ZWdvcnk9dHJ1ZSZtYWluQ2hhbm5lbElkPScrbDExMWxsbGxsbCsnJmNhdGVnb3J5SWQ9JytsbGwxbDFsbGxsKycmc29ydFR5cGU9QVomc2l6ZT0xMDAmcGFnZT0nK3N0cihsbDExbDExMTExKSkKICAgICAgICAgICAgbGxsbGxsMTExMT1qc29uLmxvYWRzKHVybGxpYjIudXJsb3BlbihsbDExMTFsbGxsKS5yZWFkKCkpCiAgICAgICAgICAgIGZvciBsbGxsbDExMWxsIGluIGxsbGxsbDExMTFbJ2l0ZW1Sb3dzJ106CiAgICAgICAgICAgICAgICBsMTExMTExMWxsLmFwcGVuZCh7ImxsbGwxbDFsbGwiOmxsbGxsMTExbGxbJ2Zvcm1hdElkJ10sImwxMTExMTFsbGwiOmxsMWwxbGxsbGwobGxsbGwxMTFsbFsndGl0bGUnXSksImxsbGxsMWwxbGwiOmxsbGxsMTExbGxbJ2ltYWdlJ11bJ3BhdGhIb3Jpem9udGFsJ10sImxsMTExMTExMTEiOmxsMWwxbGxsbGwobGxsbGwxMTFsbFsnbGluayddWyd1cmwnXSksImxsbDExMTExMTEiOmxsMTFsMWxsbGwobGxsbGwxMTFsbFsndGl0bGUnXSkubG93ZXIoKX0pCiAgICBsMTExMTExMWxsPXNvcnRlZChsMTExMTExMWxsLGtleT1sYW1iZGEgaTppWydsbGwxMTExMTExJ10scmV2ZXJzZT1GYWxzZSkKICAgIGZvciBsbGxsbDExMWxsIGluIGwxMTExMTExbGw6CiAgICAgICAgbGxsbDExbDFsbD1sbGxsbDExbDFsKHsnbGxsMTExbGxsbCc6J2xsMTExMTExMWwnLCdsMTExMTExbGxsJzpsbGxsbDExMWxsWydsMTExMTExbGxsJ10sJ2xsMTExMTExMTEnOmxsbGxsMTExbGxbJ2xsMTExMTExMTEnXSwnbGxsbDFsMWxsbCc6bGxsbGwxMTFsbFsnbGxsbDFsMWxsbCddfSkKICAgICAgICBsMTFsMTFsbGxsPXhibWNndWkuTGlzdEl0ZW0obGxsbGwxMTFsbFsnbDExMTExMWxsbCddLGljb25JbWFnZT1sbGxsbDExMWxsWydsbGxsbDFsMWxsJ10pCiAgICAgICAgbDExbDExbGxsbC5zZXRJbmZvKHR5cGU9IlZpZGVvIixpbmZvTGFiZWxzPXsicGxvdCI6bGxsbGwxMTFsbFsnbDExMTExMWxsbCddfSkKICAgICAgICBsMTFsMTFsbGxsLnNldEFydCh7J2ZhbmFydCc6bGxsbGwxMTFsbFsnbGxsbGwxbDFsbCddfSkKICAgICAgICB4Ym1jcGx1Z2luLmFkZERpcmVjdG9yeUl0ZW0oaGFuZGxlPWxsbGwxMTFsbGwsdXJsPWxsbGwxMWwxbGwsbGlzdGl0ZW09bDExbDExbGxsbCxpc0ZvbGRlcj1UcnVlKQogICAgeGJtY3BsdWdpbi5lbmRPZkRpcmVjdG9yeShsbGxsMTExbGxsKQplbGlmIGxsbDExMWxsbGxbMF09PSdsbDExMTExMTFsJzoKICAgIGxsMTExMWxsbGw9dXJsbGliMi5SZXF1ZXN0KCdodHRwczovL2FwaS5hdHJlc3BsYXllci5jb20vY2xpZW50L3YxL3Jvdy9zZWFyY2g/ZW50aXR5VHlwZT1BVFBFcGlzb2RlJmZvcm1hdElkPScrbGwxMTExMTFsbFsnbGxsbDFsMWxsbCddWzBdKycmc2l6ZT0xMDAmcGFnZT0wJykKICAgIGxsbGxsbGwxbDE9dXJsbGliMi51cmxvcGVuKGxsMTExMWxsbGwpLnJlYWQoKQogICAgbGxsbDExMTFsbD1qc29uLmxvYWRzKGxsbGxsbGwxbDEpCiAgICBsbGwxMTExbGxsPVtdCiAgICBpZiAnaXRlbVJvd3MnIGluIGxsbGwxMTExbGw6CiAgICAgICAgZm9yIGxsbGxsMTExbGwgaW4gbGxsbDExMTFsbFsnaXRlbVJvd3MnXToKICAgICAgICAgICAgbDExbDFsbGxsbD0nJwogICAgICAgICAgICBpZiAndGFnVHlwZScgaW4gbGxsbGwxMTFsbDoKICAgICAgICAgICAgICAgIGwxMWwxbGxsbGw9J1tQXScKICAgICAgICAgICAgbGxsMTExMWxsbC5hcHBlbmQoeyJsMTExMTExbGxsIjpsbDFsMWxsbGxsKGxsbGxsMTExbGxbJ3RpdGxlJ10pLCJsbGxsbGwxbDFsIjpsbDFsMWxsbGxsKGxsbGxsMTExbGxbJ3N1YlRpdGxlJ10pLCJsbGxsbDFsMWxsIjpsbGxsbDExMWxsWydpbWFnZSddWydwYXRoSG9yaXpvbnRhbCddLCJsbDExMTExMTExIjpsbDFsMWxsbGxsKGxsbGxsMTExbGxbJ2xpbmsnXVsndXJsJ10pLCJsbGxsbDExbDExIjpsMTFsMWxsbGxsfSkKICAgICAgICBsbGxsbDExMTFsPWludChsbGxsMTExMWxsWydwYWdlSW5mbyddWyd0b3RhbFBhZ2VzJ10pCiAgICAgICAgaWYgbGxsbGwxMTExbCA+IDA6CiAgICAgICAgICAgIGZvciBsbDExbDExMTExIGluIHJhbmdlKDEsbGxsbGwxMTExbCk6CiAgICAgICAgICAgICAgICBsbDExMTFsbGxsPXVybGxpYjIuUmVxdWVzdCgnaHR0cHM6Ly9hcGkuYXRyZXNwbGF5ZXIuY29tL2NsaWVudC92MS9yb3cvc2VhcmNoP2VudGl0eVR5cGU9QVRQRXBpc29kZSZmb3JtYXRJZD0nK2xsMTExMTExbGxbJ2xsbGwxbDFsbGwnXVswXSsnJnNpemU9MTAwJnBhZ2U9JytzdHIobGwxMWwxMTExMSkpCiAgICAgICAgICAgICAgICBsbGxsMTExMWxsPWpzb24ubG9hZHModXJsbGliMi51cmxvcGVuKGxsMTExMWxsbGwpLnJlYWQoKSkKICAgICAgICAgICAgICAgIGZvciBsbGxsbDExMWxsIGluIGxsbGwxMTExbGxbJ2l0ZW1Sb3dzJ106CiAgICAgICAgICAgICAgICAgICAgbDExbDFsbGxsbD0nJwogICAgICAgICAgICAgICAgICAgIGlmICd0YWdUeXBlJyBpbiBsbGxsbDExMWxsOgogICAgICAgICAgICAgICAgICAgICAgICBsMTFsMWxsbGxsPSdbUF0nCiAgICAgICAgICAgICAgICAgICAgbGxsMTExMWxsbC5hcHBlbmQoeyJsMTExMTExbGxsIjpsbDFsMWxsbGxsKGxsbGxsMTExbGxbJ3RpdGxlJ10pLCJsbGxsbGwxbDFsIjpsbDFsMWxsbGxsKGxsbGxsMTExbGxbJ3N1YlRpdGxlJ10pLCJsbGxsbDFsMWxsIjpsbGxsbDExMWxsWydpbWFnZSddWydwYXRoSG9yaXpvbnRhbCddLCJsbDExMTExMTExIjpsbDFsMWxsbGxsKGxsbGxsMTExbGxbJ2xpbmsnXVsndXJsJ10pLCJsbGxsbDExbDExIjpsMTFsMWxsbGxsfSkKICAgICAgICBmb3IgbGxsbGwxMTFsbCBpbiBsbGwxMTExbGxsOgogICAgICAgICAgICBsbGxsMTFsMWxsPWxsbGxsMTFsMWwoeydsbGwxMTFsbGxsJzonbDExbDExMUkxMScsJ2wxMTExMTFsbGwnOmxsbGxsMTExbGxbJ2wxMTExMTFsbGwnXSwnbGwxMTExMTExMSc6bGxsbGwxMTFsbFsnbGwxMTExMTExMSddLCdsbGxsbDFsMWxsJzpsbGxsbDExMWxsWydsbGxsbDFsMWxsJ119KQogICAgICAgICAgICBsMTFsMTFsbGxsPXhibWNndWkuTGlzdEl0ZW0obGxsbGwxMTFsbFsnbDExMTExMWxsbCddLGljb25JbWFnZT1sbGxsbDExMWxsWydsbGxsbDFsMWxsJ10pCiAgICAgICAgICAgIGwxMWwxMWxsbGwuc2V0SW5mbyh0eXBlPSJWaWRlbyIsaW5mb0xhYmVscz17InBsb3QiOmxsbGxsMTExbGxbJ2wxMTExMTFsbGwnXX0pCiAgICAgICAgICAgIGwxMWwxMWxsbGwuc2V0QXJ0KHsnZmFuYXJ0JzpsbGxsbDExMWxsWydsbGxsbDFsMWxsJ119KQogICAgICAgICAgICB4Ym1jcGx1Z2luLmFkZERpcmVjdG9yeUl0ZW0oaGFuZGxlPWxsbGwxMTFsbGwsdXJsPWxsbGwxMWwxbGwsbGlzdGl0ZW09bDExbDExbGxsbCxpc0ZvbGRlcj1UcnVlKQogICAgICAgIHhibWNwbHVnaW4uZW5kT2ZEaXJlY3RvcnkobGxsbDExMWxsbCkKICAgIGVsc2U6CiAgICAgICAgeGJtYy5leGVjdXRlYnVpbHRpbignWEJNQy5Ob3RpZmljYXRpb24oJXMsJXMsJXMsJXMpJyAlICgnTm8gaGF5IHZpZGVvcycsJ05vIHNlIGhhbiBlbmNvbnRyYWRvIHZpZGVvcyBwYXJhIGVzdGUgcHJvZ3JhbWEnLDQwMDAsbGxsMTFsMWxsbCsnL2ljb24ucG5nJykpCmVsaWYgbGxsMTExbGxsbFswXT09J2wxMWwxMTFJMTEnOgogICAgbGxsbGxsbDExbD1sbGxsbGwxMWxsKCdodHRwczovL3d3dy5hdHJlc3BsYXllci5jb20nK2xsMTExMTExbGxbJ2xsMTExMTExMTEnXVswXSwwKQogICAgaWYgbGxsbGxsbDExbD09Jyc6CiAgICAgICAgeGJtYy5leGVjdXRlYnVpbHRpbignWEJNQy5Ob3RpZmljYXRpb24oJXMsJXMsJXMsJXMpJyAlICgnVmlkZW8gbm8gYWNjZXNpYmxlJywiUHVlZGUgcXVlIHNlYSBtdXkgbnVldm8gbyBxdWUgYXVuIG5vIHNlIGhheWEgZW1pdGlkby4gUHJ1ZWJhIG1hcyBhZGVsYW50ZS4iLDE1MDAwLGxsbDExbDFsbGwrJy9pY29uLnBuZycpKQogICAgZWxzZToKICAgICAgICBsMTExMWxsbGxsPXJlcXVlc3RzLmdldChsbGxsbGxsMTFsKS50ZXh0CiAgICAgICAgaWYgJy5tM3U4JyBpbiBsbGxsbGxsMTFsOgogICAgICAgICAgICBsbGwxMTExMWxsPXhibWNndWkuTGlzdEl0ZW0obGwxMTExMTFsbFsnbDExMTExMWxsbCddWzBdKQogICAgICAgICAgICBsbGwxMTExMWxsLnNldEluZm8oJ3ZpZGVvJyx7J1RpdGxlJzpsbDExMTExMWxsWydsMTExMTExbGxsJ11bMF19KQogICAgICAgICAgICB4Ym1jLlBsYXllcigpLnBsYXkobGxsbGxsbDExbCxsbGwxMTExMWxsKQogICAgICAgIGVsc2U6CiAgICAgICAgICAgIGwxMTExMWxsbGw9W10KICAgICAgICAgICAgbGxsbGwxMTExMT1mNG1Qcm94eUhlbHBlcigpCiAgICAgICAgICAgIGxsbGwxMTExMTEsbGxsbGwxMTFsbD1sbGxsbDExMTExLnBsYXlGNG1MaW5rKGxsbGxsbGwxMWwsbGwxMTExMTFsbFsnbDExMTExMWxsbCddWzBdLE5vbmUsVHJ1ZSwwLEZhbHNlLCcnLCdIRFMnLFRydWUsTm9uZSwnJywnJyxsbDExMTExMWxsWydsbGxsbDFsMWxsJ11bMF0pCiAgICAgICAgICAgIGxsbGxsMTExbGwuc2V0UHJvcGVydHkoIklzUGxheWFibGUiLCJ0cnVlIikKICAgICAgICAgICAgbGxsbDExbDExbD1sMTExMWxsbGxsLnNwbGl0KCdiaXRyYXRlPSInKQogICAgICAgICAgICBsbGwxMTExMTFsPWxsbGxsMTExbGwuZ2V0TGFiZWwoKS5kZWNvZGUoJ3V0ZjgnKQogICAgICAgICAgICBmb3IgbDExbDExMTExbCBpbiByYW5nZSgxLGxlbihsbGxsMTFsMTFsKSk6CiAgICAgICAgICAgICAgICBsbGwxMWwxMWxsPWxsbGwxMWwxMWxbbDExbDExMTExbF0uc3BsaXQoJyInKQogICAgICAgICAgICAgICAgbDExMTExbGxsbC5hcHBlbmQoeydsMTFsMTExMTFJJzppbnQobGxsMTFsMTFsbFswXSl9KQogICAgICAgICAgICBsMTExMTFsbGxsPXNvcnRlZChsMTExMTFsbGxsLGtleT1sYW1iZGEgaTppWydsMTFsMTExMTFJJ10scmV2ZXJzZT1UcnVlKQogICAgICAgICAgICBmb3IgbGwxMTExMWxsbCBpbiBsMTExMTFsbGxsOgogICAgICAgICAgICAgICAgbGxsbGwxMTFsbC5zZXRMYWJlbCgnW0JdJytsbGwxMTExMTFsKydbL0JdIHwgJytzdHIobGwxMTExMWxsbFsnbDExbDExMTExSSddKSsnIGticHMnKQogICAgICAgICAgICAgICAgbGxsbGwxMTFsbC5zZXRJbmZvKHR5cGU9IlZpZGVvIixpbmZvTGFiZWxzPXsicGxvdCI6bGwxMTExMTFsbFsnbDExMTExMWxsbCddWzBdfSkKICAgICAgICAgICAgICAgIGxsbGxsMTExbGwuc2V0QXJ0KHsnZmFuYXJ0JzpsbDExMTExMWxsWydsbGxsbDFsMWxsJ11bMF19KQogICAgICAgICAgICAgICAgbGxsbGwxMTFsbC5zZXRQcm9wZXJ0eSgiSXNQbGF5YWJsZSIsInRydWUiKQogICAgICAgICAgICAgICAgeGJtY3BsdWdpbi5hZGREaXJlY3RvcnlJdGVtKGhhbmRsZT1sbGxsMTExbGxsLHVybD1sbGxsMTExMTExLnJlcGxhY2UoJ21heGJpdHJhdGU9MCcsJ21heGJpdHJhdGU9JytzdHIobGwxMTExMWxsbFsnbDExbDExMTExSSddKSksbGlzdGl0ZW09bGxsbGwxMTFsbCxpc0ZvbGRlcj1GYWxzZSkKICAgICAgICAgICAgeGJtY3BsdWdpbi5lbmRPZkRpcmVjdG9yeShsbGxsMTExbGxsKQ=='))