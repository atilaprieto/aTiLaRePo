import sys
import base64
exec(base64.b64decode('aW1wb3J0IHhibWNndWkseGJtY3BsdWdpbix4Ym1jLHVybGxpYix1cmxsaWIyLHVybHBhcnNlLGpzb24seGJtY2FkZG9uLG9zLHJlLHJhbmRvbSxyZXF1ZXN0cyx1bmljb2RlZGF0YSx1cmxyZXNvbHZlcixyZXNvbHZldXJsCmZyb20gc3FsaXRlMyBpbXBvcnQgZGJhcGkyIGFzIGRhdGFiYXNlCmZyb20gdHlwZXMgaW1wb3J0IFVuaWNvZGVUeXBlCmZyb20gRjRtUHJveHkgaW1wb3J0IGY0bVByb3h5SGVscGVyCmZyb20gcmVzb2x2ZXVybC5wbHVnaW5zLmxpYiBpbXBvcnQganN1bnBhY2sKTzAwMHhPTzAwMDAwMDAwPXN5cy5hcmd2WzBdCk8wMDB4MDAwT09PT09PTz1pbnQoc3lzLmFyZ3ZbMV0pCk9PMDB4MDAwMDAwMDBPMD11cmxwYXJzZS5wYXJzZV9xcyhzeXMuYXJndlsyXVsxOl0pCk8wMDB4ME9PT09PT09PTz14Ym1jYWRkb24uQWRkb24oKQpPMDAweDBPT09PT09PTzA9TzAwMHgwT09PT09PT09PLmdldEFkZG9uSW5mbygncGF0aCcpCnN5cy5wYXRoLmFwcGVuZCh4Ym1jLnRyYW5zbGF0ZVBhdGgob3MucGF0aC5qb2luKE8wMDB4ME9PT09PT09PMCwnbGliJykpKQpPMDAweDAwMDAwMDBPT089b3MucGF0aC5qb2luKHhibWMudHJhbnNsYXRlUGF0aCgic3BlY2lhbDovL2RhdGFiYXNlIiksJ2F0cmVzcGxheWVyLmRiJykKTzAwMHgwMDAwMDBPTzAwPWRhdGFiYXNlLmNvbm5lY3QoTzAwMHgwMDAwMDAwT09PKQpPMDAweDAwMDAwMDBPTzA9TzAwMHgwMDAwMDBPTzAwLmN1cnNvcigpCmRlZiBPMDAwMHgwMDAwMDAwMDAoTzAwMDB4MDAwMDAwMDBPKToKICAgIE8wMDAweDAwMDAwMDBPMD1bXQogICAgTzAwMDB4MDBPMDAwMDAwPU8wMDAweDAwMDAwMDAwTy5zcGxpdCgnXycpCiAgICBPMDAwMHgwTzAwMDAwMDA9TzAwMDB4MDBPMDAwMDAwWzFdLnNwbGl0KCcvJykKICAgIE8wMDAweDAwME9PMDAwMD1vcGVuKE8wMDB4ME9PT09PT09PMCsnL3Jlc291cmNlcy9zZXR0aW5ncy50eHQnLCJyIikKICAgIE8wMDAweDAwMDBPMDAwMD1iYXNlNjQuYjY0ZGVjb2RlKE8wMDAweDAwME9PMDAwMC5yZWFkKCkpCiAgICBPMDAwMHgwMDBPTzAwMDAuY2xvc2UoKQogICAgTzAwMDB4MDAwMDAwTzAwPU8wMDAweDAwMDBPMDAwMAogICAgTzAwMDB4MDAwMDAwME9PPU8wMDAweDAwMDAwME8wMC5zcGxpdCgiXG4iKQogICAgZm9yIE8wMDAweDAwME8wMDAwMCBpbiByYW5nZSgwLGxlbihPMDAwMHgwMDAwMDAwT08pKToKICAgICAgICBpZiBPMDAwMHgwTzAwMDAwMDBbMF0gaW4gTzAwMDB4MDAwMDAwME9PW08wMDAweDAwME8wMDAwMF06CiAgICAgICAgICAgIE8wMDAweE8wMDAwMDAwMD1PMDAwMHgwMDAwMDAwT09bTzAwMDB4MDAwTzAwMDAwXS5zcGxpdChPMDAwMHgwTzAwMDAwMDBbMF0rJzonKQogICAgICAgICAgICBPMDAwMHgwMDAwMDAwTzAuYXBwZW5kKHsnTzAwMDB4MDAwMDAwT08wJzpPMDAwMHhPMDAwMDAwMDBbMV19KQogICAgcmV0dXJuIE8wMDAweDAwMDAwMDBPMApkZWYgTzAwMHgwMDAwMDAwMDAwKE8wMDB4MDAwMDBPTzAwMCk6CiAgICB0cnk6CiAgICAgICAgTzAwMHgwMDAwME9PMDAwPXVuaWNvZGUoTzAwMHgwMDAwME9PMDAwLmVuY29kZSgidXRmLTgiKSwndXRmLTgnKQogICAgZXhjZXB0IE5hbWVFcnJvcjoKICAgICAgICBwYXNzCiAgICBPMDAweDAwMDAwT08wMDA9dW5pY29kZWRhdGEubm9ybWFsaXplKCdORkQnLE8wMDB4MDAwMDBPTzAwMClcCiAgICAgICAgICAgLmVuY29kZSgnYXNjaWknLCdpZ25vcmUnKVwKICAgICAgICAgICAuZGVjb2RlKCJ1dGYtOCIpCiAgICByZXR1cm4gc3RyKE8wMDB4MDAwMDBPTzAwMCkKZGVmIE8wMDB4MDAwMDAwTzAwMChPMDAweDAwMDAwMDAwME8pOgogICAgTzAwMHgwMDAwMDAwTzAwPU8wMDB4MDAwMDAwMDAwMChPMDAweDAwMDAwMDAwME8pCiAgICBPMDAweDAwMDAwMDBPMDA9cmUuc3ViKHInWyNcXC86Iio/PD58XSsnLCIiLE8wMDB4MDAwMDAwME8wMCkKICAgIE8wMDB4MDAwMDAwME8wMD0iIi5qb2luKGkgZm9yIGkgaW4gTzAwMHgwMDAwMDAwTzAwIGlmIG9yZChpKTwxMjgpCiAgICBPMDAweDAwMDAwMDBPMDA9JyAnLmpvaW4oTzAwMHgwMDAwMDAwTzAwLnNwbGl0KCkpCiAgICByZXR1cm4gTzAwMHgwMDAwMDAwTzAwCmRlZiBPMDAweDAwMDAwME9PTzAoTzAwMHgwMDAwMDAwMDBPKToKICAgIHJldHVybiBPMDAweDAwMDAwMDAwTzAoTzAwMHgwMDAwMDAwMDBPKS5lbmNvZGUoJ3V0Zi04JykKZGVmIE8wMDB4MDAwMDAwMDBPMChPMDAweDAwMDAwTzAwMDApOgogICAgaWYgdHlwZShPMDAweDAwMDAwTzAwMDApIGlzIFVuaWNvZGVUeXBlOgogICAgICAgIHJldHVybiBPMDAweDAwMDAwTzAwMDAKICAgIGVsc2U6CiAgICAgICAgdHJ5OgogICAgICAgICAgICByZXR1cm4gdW5pY29kZShPMDAweDAwMDAwTzAwMDAsJ3V0Zi04JykKICAgICAgICBleGNlcHQ6CiAgICAgICAgICAgIHJldHVybiB1bmljb2RlKE8wMDB4MDAwMDBPMDAwMCwnaXNvLTg4NTktMScpCmRlZiBPMDAweDBPTzAwMDAwMDAoTzAwMHgwMDAwME9PTzAwKToKICAgIHJldHVybiBPMDAweE9PMDAwMDAwMDArJz8nK3VybGxpYi51cmxlbmNvZGUoTzAwMHgwMDAwME9PTzAwKQpkZWYgTzAwMHgwT09PT08wMDAwKE8wMDB4MDAwTzAwMDAwMCxPMDAweDAwMDBPMDAwMDApOgogICAgTzAwMHgwME8wMDAwMDAwPVtdCiAgICBpZiBPMDAweDAwMDBPMDAwMDA9PTM6CiAgICAgICAgcmV0dXJuIE8wMDB4MDBPMDAwMDAwMAogICAgZWxzZToKICAgICAgICBPMDAweDAwME8wMDAwMDA9TzAwMHgwMDBPMDAwMDAwLnJlcGxhY2UoJyAnLCclMjAnKQogICAgICAgIE8wMDB4MDAwMDAwME9PMC5leGVjdXRlKCJDUkVBVEUgVEFCTEUgSUYgTk9UIEVYSVNUUyBhM2xpbmtzIChwYWdlX2xpbmsgVEVYVCwgcmV0dXJuX2xpbmsgVEVYVCwgdGlwbyBURVhULCBVTklRVUUocGFnZV9saW5rLCB0aXBvKSk7IikKICAgICAgICBPMDAweDAwMDAwME9PMDAuY29tbWl0KCkKICAgICAgICBPMDAweDAwMDAwMDBPTzAuZXhlY3V0ZSgiU0VMRUNUIHJldHVybl9saW5rLCB0aXBvIEZST00gYTNsaW5rcyBXSEVSRSBwYWdlX2xpbmsgPSAnIitPMDAweDAwME8wMDAwMDArIiciKQogICAgICAgIE8wMDB4MDAwME9PMDAwMD1PMDAweDAwMDAwMDBPTzAuZmV0Y2hhbGwoKQogICAgICAgIGlmIGxlbihPMDAweDAwMDBPTzAwMDApPjA6CiAgICAgICAgICAgIGZvciBPMDAweDAwME9PMDAwMDAgaW4gTzAwMHgwMDAwT08wMDAwOgogICAgICAgICAgICAgICAgTzAwMHgwME8wMDAwMDAwLmFwcGVuZCh7J08wMDB4MDBPTzAwMDAwMCc6TzAwMHgwMDBPTzAwMDAwWzBdLCdPMDAweDAwMDAwMDAwT08nOk8wMDB4MDAwT08wMDAwMFsxXX0pCiAgICAgICAgICAgIHJldHVybiBPMDAweDAwTzAwMDAwMDAKICAgICAgICBlbHNlOgogICAgICAgICAgICBPMDAweDAwMDBPT09PTzA9eydTZWMtRmV0Y2gtTW9kZSc6J2NvcnMnLCdPcmlnaW4nOidodHRwczovL2VsamF2aWVyby5jb20nLCdBY2NlcHQtTGFuZ3VhZ2UnOidlcy1FUyxlcztxPTAuOScsJ1gtUmVxdWVzdGVkLVdpdGgnOidYTUxIdHRwUmVxdWVzdCcsJ0Nvbm5lY3Rpb24nOidrZWVwLWFsaXZlJywnUHJhZ21hJzonbm8tY2FjaGUnLCdVc2VyLUFnZW50JzonTW96aWxsYS81LjAgKFgxMTsgTGludXggeDg2XzY0KSBBcHBsZVdlYktpdC81MzcuMzYgKEtIVE1MLCBsaWtlIEdlY2tvKSBDaHJvbWUvNzcuMC4zODY1LjEyMCBTYWZhcmkvNTM3LjM2JywnQ29udGVudC1UeXBlJzonYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkOyBjaGFyc2V0PVVURi04JywnQWNjZXB0JzonKi8qJywnQ2FjaGUtQ29udHJvbCc6J25vLWNhY2hlJywnUmVmZXJlcic6J2h0dHBzOi8vZWxqYXZpZXJvLmNvbS9kZXNjYXJnYXJ2aWRlb3NkZWxhdGVsZS9kb3dubG9hZC8nLCdTZWMtRmV0Y2gtU2l0ZSc6J3NhbWUtb3JpZ2luJ30KICAgICAgICAgICAgTzAwMHgwME9PT09PMDAwPXVybGxpYi51cmxlbmNvZGUoeyd1cmxfbm90aWNpYSc6TzAwMHgwMDBPMDAwMDAwLCdzdWJtaXRfZW52aWFyX3VybCc6J29rJywnY3VycmVudF91cmwnOidodHRwczovL2VsamF2aWVyby5jb20vZGVzY2FyZ2FydmlkZW9zZGVsYXRlbGUvZG93bmxvYWQvJ30pCiAgICAgICAgICAgIE8wMDB4MDAwT09PTzAwMD11cmxsaWIyLlJlcXVlc3QoImh0dHBzOi8vZWxqYXZpZXJvLmNvbS9kZXNjYXJnYXJ2aWRlb3NkZWxhdGVsZS9pbmRleC5waHAiLGRhdGE9TzAwMHgwME9PT09PMDAwLGhlYWRlcnM9TzAwMHgwMDAwT09PT08wKQogICAgICAgICAgICBPMDAweDAwMDBPT08wMDA9anNvbi5sb2Fkcyh1cmxsaWIyLnVybG9wZW4oTzAwMHgwMDBPT09PMDAwLHRpbWVvdXQ9NjApLnJlYWQoKSkKICAgICAgICAgICAgaWYgJ3BydWViYSBkZSBudWV2bycgaW4gTzAwMHgwMDAwT09PMDAwWydtZW5zYWplJ106CiAgICAgICAgICAgICAgICBPMDAweDAwMDBPMDAwMDA9TzAwMHgwMDAwTzAwMDAwKzEKICAgICAgICAgICAgZWxpZiAnbm8gcGFyZWNlIHF1ZSBoYXlhIHVuYScgaW4gTzAwMHgwMDAwT09PMDAwWydtZW5zYWplJ106CiAgICAgICAgICAgICAgICBPMDAweDAwMDBPMDAwMDA9TzAwMHgwMDAwTzAwMDAwKzEKICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgIGlmICcubXBkJyBpbiBPMDAweDAwMDBPT08wMDBbJ21lbnNhamUnXToKICAgICAgICAgICAgICAgICAgICBPTzAweDAwT08wMDAwMDA9TzAwMHgwMDAwT09PMDAwWydtZW5zYWplJ10uc3BsaXQoJy5tcGQ8L2Rpdj4nKQogICAgICAgICAgICAgICAgICAgIE9PMDB4ME9PMDAwMDAwMD1PTzAweDAwT08wMDAwMDBbMF0uc3BsaXQoJz4nKQogICAgICAgICAgICAgICAgICAgIE8wMDB4MDAwMDAwME9PMC5leGVjdXRlKCJJTlNFUlQgSU5UTyBhM2xpbmtzIFZBTFVFUyAoJyIrTzAwMHgwMDBPMDAwMDAwKyInLCAnIitPTzAweDBPTzAwMDAwMDBbLTFdKycubXBkJysiJywgJ08wMDB4T09PT09PT09PTycpOyIpCiAgICAgICAgICAgICAgICAgICAgTzAwMHgwMDAwMDBPTzAwLmNvbW1pdCgpCiAgICAgICAgICAgICAgICAgICAgTzAwMHgwME8wMDAwMDAwLmFwcGVuZCh7J08wMDB4MDBPTzAwMDAwMCc6T08wMHgwT08wMDAwMDAwWy0xXSsnLm1wZCcsJ08wMDB4MDAwMDAwMDBPTyc6J08wMDB4T09PT09PT09PTyd9KQogICAgICAgICAgICAgICAgaWYgJy5mNG0nIGluIE8wMDB4MDAwME9PTzAwMFsnbWVuc2FqZSddOgogICAgICAgICAgICAgICAgICAgIE9PMDB4MDBPTzAwMDAwMD1PMDAweDAwMDBPT08wMDBbJ21lbnNhamUnXS5zcGxpdCgnLmY0bTwvZGl2PicpCiAgICAgICAgICAgICAgICAgICAgT08wMHgwT08wMDAwMDAwPU9PMDB4MDBPTzAwMDAwMFswXS5zcGxpdCgnPicpCiAgICAgICAgICAgICAgICAgICAgTzAwMHgwMDAwMDAwT08wLmV4ZWN1dGUoIklOU0VSVCBJTlRPIGEzbGlua3MgVkFMVUVTICgnIitPMDAweDAwME8wMDAwMDArIicsICciK09PMDB4ME9PMDAwMDAwMFstMV0rJy5mNG0nKyInLCAnT08wMHgwMDBPTzAwMDAwJyk7IikKICAgICAgICAgICAgICAgICAgICBPMDAweDAwMDAwME9PMDAuY29tbWl0KCkKICAgICAgICAgICAgICAgICAgICBPMDAweDAwTzAwMDAwMDAuYXBwZW5kKHsnTzAwMHgwME9PMDAwMDAwJzpPTzAweDBPTzAwMDAwMDBbLTFdKycuZjRtJywnTzAwMHgwMDAwMDAwME9PJzonT08wMHgwMDBPTzAwMDAwJ30pCiAgICAgICAgICAgICAgICBpZiAnLm0zdTgnIGluIE8wMDB4MDAwME9PTzAwMFsnbWVuc2FqZSddOgogICAgICAgICAgICAgICAgICAgIE9PMDB4MDBPTzAwMDAwMD1PMDAweDAwMDBPT08wMDBbJ21lbnNhamUnXS5zcGxpdCgnLm0zdTgnKQogICAgICAgICAgICAgICAgICAgIE9PMDB4ME9PMDAwMDAwMD1PTzAweDAwT08wMDAwMDBbMF0uc3BsaXQoJ1wnJykKICAgICAgICAgICAgICAgICAgICBPTzAweE9PMDAwMDAwMDA9T08wMHgwME9PMDAwMDAwWzFdLnNwbGl0KCdcJycpCiAgICAgICAgICAgICAgICAgICAgTzAwMHgwMDAwME9PT09PPU9PMDB4ME9PMDAwMDAwMFstMV0rJy5tM3U4JytPTzAweE9PMDAwMDAwMDBbMF0KICAgICAgICAgICAgICAgICAgICBPMDAweE9PT08wMDAwMDA9TzAwMHgwMDAwME9PT09PLnJlcGxhY2UoJ2RybS8nLCcvJykKICAgICAgICAgICAgICAgICAgICBPMDAweDAwMDAwMDBPTzAuZXhlY3V0ZSgiSU5TRVJUIElOVE8gYTNsaW5rcyBWQUxVRVMgKCciK08wMDB4MDAwTzAwMDAwMCsiJywgJyIrTzAwMHhPT09PMDAwMDAwKyInLCAnTzAwMHgwME9PT09PT09PJyk7IikKICAgICAgICAgICAgICAgICAgICBPMDAweDAwMDAwME9PMDAuY29tbWl0KCkKICAgICAgICAgICAgICAgICAgICBPMDAweDAwTzAwMDAwMDAuYXBwZW5kKHsnTzAwMHgwME9PMDAwMDAwJzpPMDAweE9PT08wMDAwMDAsJ08wMDB4MDAwMDAwMDBPTyc6J08wMDB4MDBPT09PT09PTyd9KQogICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICBPMDAweDBPMDAwMDAwMDA9MAogICAgICAgICAgICAgICAgICAgIHdoaWxlIFRydWU6CiAgICAgICAgICAgICAgICAgICAgICAgIGlmIE8wMDB4ME8wMDAwMDAwMD09MzoKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrCiAgICAgICAgICAgICAgICAgICAgICAgIE9PMDB4MDBPTzAwMDAwMD1PMDAweDAwMDBPT08wMDBbJ21lbnNhamUnXS5zcGxpdCgnPGEgaHJlZj0iJykKICAgICAgICAgICAgICAgICAgICAgICAgT08wMHgwT08wMDAwMDAwPU9PMDB4MDBPTzAwMDAwMFszXS5zcGxpdCgnIicpCiAgICAgICAgICAgICAgICAgICAgICAgIE8wMDB4MDAwME9PT09PMD17J1NlYy1GZXRjaC1Nb2RlJzonY29ycycsJ09yaWdpbic6J2h0dHBzOi8vZWxqYXZpZXJvLmNvbScsJ0FjY2VwdC1MYW5ndWFnZSc6J2VzLUVTLGVzO3E9MC45JywnWC1SZXF1ZXN0ZWQtV2l0aCc6J1hNTEh0dHBSZXF1ZXN0JywnQ29ubmVjdGlvbic6J2tlZXAtYWxpdmUnLCdQcmFnbWEnOiduby1jYWNoZScsJ1VzZXItQWdlbnQnOidNb3ppbGxhLzUuMCAoWDExOyBMaW51eCB4ODZfNjQpIEFwcGxlV2ViS2l0LzUzNy4zNiAoS0hUTUwsIGxpa2UgR2Vja28pIENocm9tZS83Ny4wLjM4NjUuMTIwIFNhZmFyaS81MzcuMzYnLCdDb250ZW50LVR5cGUnOidhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7IGNoYXJzZXQ9VVRGLTgnLCdBY2NlcHQnOicqLyonLCdDYWNoZS1Db250cm9sJzonbm8tY2FjaGUnLCdSZWZlcmVyJzpPTzAweDBPTzAwMDAwMDBbMF0sJ1NlYy1GZXRjaC1TaXRlJzonc2FtZS1vcmlnaW4nfQogICAgICAgICAgICAgICAgICAgICAgICBPMDAweDAwT09PT08wMDA9dXJsbGliLnVybGVuY29kZSh7J3VybF9ub3RpY2lhJzpPMDAweDAwME8wMDAwMDAsJ3N1Ym1pdF9lbnZpYXJfdXJsJzonb2snLCdjdXJyZW50X3VybCc6T08wMHgwT08wMDAwMDAwWzBdfSkKICAgICAgICAgICAgICAgICAgICAgICAgTzAwMHgwMDBPT09PMDAwPXVybGxpYjIuUmVxdWVzdCgiaHR0cHM6Ly9lbGphdmllcm8uY29tL2Rlc2NhcmdhcnZpZGVvc2RlbGF0ZWxlL2luZGV4LnBocCIsZGF0YT1PMDAweDAwT09PT08wMDAsaGVhZGVycz1PMDAweDAwMDBPT09PTzApCiAgICAgICAgICAgICAgICAgICAgICAgIE8wMDB4TzAwMDAwMDAwMD1qc29uLmxvYWRzKHVybGxpYjIudXJsb3BlbihPMDAweDAwME9PT08wMDAsdGltZW91dD02MCkucmVhZCgpKQogICAgICAgICAgICAgICAgICAgICAgICBpZiAnLm0zdTgnIG5vdCBpbiBPMDAweE8wMDAwMDAwMDBbJ21lbnNhamUnXToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIE8wMDB4ME8wMDAwMDAwMD1PMDAweDBPMDAwMDAwMDArMQogICAgICAgICAgICAgICAgICAgICAgICAgICAgeGJtYy5zbGVlcChyYW5kb20ucmFuZGludCgxMDAsMzUwKSkKICAgICAgICAgICAgICAgICAgICAgICAgZWxzZToKICAgICAgICAgICAgICAgICAgICAgICAgICAgIE9PMDB4MDBPTzAwMDAwMD1PMDAweE8wMDAwMDAwMDBbJ21lbnNhamUnXS5zcGxpdCgnLm0zdTgnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgT08wMHgwT08wMDAwMDAwPU9PMDB4MDBPTzAwMDAwMFswXS5zcGxpdCgnXCcnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgT08wMHhPTzAwMDAwMDAwPU9PMDB4MDBPTzAwMDAwMFsxXS5zcGxpdCgnXCcnKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgTzAwMHgwMDAwME9PT09PPU9PMDB4ME9PMDAwMDAwMFstMV0rJy5tM3U4JytPTzAweE9PMDAwMDAwMDBbMF0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIE8wMDB4T09PTzAwMDAwMD1PMDAweDAwMDAwT09PT08ucmVwbGFjZSgnZHJtLycsJy8nKQogICAgICAgICAgICAgICAgICAgICAgICAgICAgTzAwMHgwMDAwMDAwT08wLmV4ZWN1dGUoIklOU0VSVCBJTlRPIGEzbGlua3MgVkFMVUVTICgnIitPMDAweDAwME8wMDAwMDArIicsICciK08wMDB4T09PTzAwMDAwMCsiJywgJ08wMDB4MDBPT09PT09PTycpOyIpCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBPMDAweDAwMDAwME9PMDAuY29tbWl0KCkKICAgICAgICAgICAgICAgICAgICAgICAgICAgIE8wMDB4MDBPMDAwMDAwMC5hcHBlbmQoeydPMDAweDAwT08wMDAwMDAnOk8wMDB4T09PTzAwMDAwMCwnTzAwMHgwMDAwMDAwME9PJzonTzAwMHgwME9PT09PT09PJ30pCiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhawogICAgICAgICAgICAgICAgcmV0dXJuIE8wMDB4MDBPMDAwMDAwMAogICAgICAgICAgICBpZiBPMDAweDAwMDBPMDAwMDA+MDoKICAgICAgICAgICAgICAgIHhibWMuc2xlZXAocmFuZG9tLnJhbmRpbnQoMTAwLDM1MCkpCiAgICAgICAgICAgICAgICByZXR1cm4gTzAwMHgwT09PT08wMDAwKE8wMDB4MDAwTzAwMDAwMCxPMDAweDAwMDBPMDAwMDApCk8wMDB4T09PT09PMDAwMD1PTzAweDAwMDAwMDAwTzAuZ2V0KCdPMDAweE9PT09PTzAwMDAnLE5vbmUpCmlmIE8wMDB4T09PT09PMDAwMCBpcyBOb25lOgogICAgTzAwMHgwMDBPT09PMDAwPXVybGxpYjIuUmVxdWVzdCgnaHR0cHM6Ly93d3cuYXRyZXNwbGF5ZXIuY29tLycpCiAgICBPMDAweE9PT09PMDAwMDA9dXJsbGliMi51cmxvcGVuKE8wMDB4MDAwT09PTzAwMCkucmVhZCgpCiAgICBPMDAweDAwMDBPT09PT089W10KICAgIE9PMDB4MDBPTzAwMDAwMD1PMDAweE9PT09PMDAwMDAuc3BsaXQoJ1NpdGVOYXZpZ2F0aW9uRWxlbWVudCIsIm5hbWUiOiInKQogICAgZm9yIE9PMDB4MDAwMDAwME9PTyBpbiByYW5nZSgxLGxlbihPTzAweDAwT08wMDAwMDApKToKICAgICAgICBPTzAweDBPTzAwMDAwMDA9T08wMHgwME9PMDAwMDAwW09PMDB4MDAwMDAwME9PT10uc3BsaXQoJyInKQogICAgICAgIE9PMDB4T08wMDAwMDAwMD1PTzAweDAwT08wMDAwMDBbT08wMHgwMDAwMDAwT09PXS5zcGxpdCgnLCJ1cmwiOiInKQogICAgICAgIE9PMDB4MDAwMDBPTzAwMD1PTzAweE9PMDAwMDAwMDBbMV0uc3BsaXQoJyInKQogICAgICAgIE8wMDB4MDAwME9PT09PTy5hcHBlbmQoeydPMDAweDAwME9PT09PTzAnOk8wMDB4MDAwMDAwT09PMChPTzAweDBPTzAwMDAwMDBbMF0pLCdPMDAweDAwT08wMDAwMDAnOk9PMDB4MDAwMDBPTzAwMFswXS5yZXBsYWNlKCdcXHUwMDJGJywnLycpfSkKICAgIGZvciBPTzAweDAwMDAwTzAwMDAgaW4gTzAwMHgwMDAwT09PT09POgogICAgICAgIE8wMDB4MDBPTzAwMDAwMD1PMDAweDBPTzAwMDAwMDAoeydPMDAweE9PT09PTzAwMDAnOidPMDAweDAwT09PT09PMDAnLCdPMDAweDBPT09PT08wMDAnOk9PMDB4MDAwMDBPMDAwMFsnTzAwMHgwMDBPT09PT08wJ10sJ09PMDB4MDAwMDAwT08wMCc6T08wMHgwMDAwME8wMDAwWydPMDAweDAwT08wMDAwMDAnXX0pCiAgICAgICAgT08wMHgwMDAwMDAwT08wPXhibWNndWkuTGlzdEl0ZW0oT08wMHgwMDAwME8wMDAwWydPMDAweDAwME9PT09PTzAnXSxpY29uSW1hZ2U9TzAwMHgwT09PT09PT08wKycvaWNvbi5wbmcnKQogICAgICAgIE9PMDB4MDAwMDAwME9PMC5zZXRJbmZvKHR5cGU9IlZpZGVvIixpbmZvTGFiZWxzPXsicGxvdCI6T08wMHgwMDAwME8wMDAwWydPMDAweDAwME9PT09PTzAnXX0pCiAgICAgICAgT08wMHgwMDAwMDAwT08wLnNldEFydCh7J2ZhbmFydCc6TzAwMHgwT09PT09PT08wKycvZmFuYXJ0LmpwZyd9KQogICAgICAgIHhibWNwbHVnaW4uYWRkRGlyZWN0b3J5SXRlbShoYW5kbGU9TzAwMHgwMDBPT09PT09PLHVybD1PMDAweDAwT08wMDAwMDAsbGlzdGl0ZW09T08wMHgwMDAwMDAwT08wLGlzRm9sZGVyPVRydWUpCiAgICB4Ym1jcGx1Z2luLmVuZE9mRGlyZWN0b3J5KE8wMDB4MDAwT09PT09PTykKZWxpZiBPMDAweE9PT09PTzAwMDBbMF09PSdPMDAweDAwT09PT09PMDAnOgogICAgTzAwMHgwMDBPT09PMDAwPXVybGxpYjIuUmVxdWVzdChPTzAweDAwMDAwMDAwTzBbJ09PMDB4MDAwMDAwT08wMCddWzBdKQogICAgTzAwMHgwMDAwMDBPT09PPXVybGxpYjIudXJsb3BlbihPMDAweDAwME9PT08wMDApLnJlYWQoKQogICAgT08wMHgwME9PMDAwMDAwPU8wMDB4MDAwMDAwT09PTy5zcGxpdCgnInJlZGlyZWN0IjpmYWxzZSwiaHJlZiI6IicpCiAgICBPTzAweDBPTzAwMDAwMDA9T08wMHgwME9PMDAwMDAwWzFdLnNwbGl0KCciJykKICAgIE9PMDB4T08wMDAwMDAwMD1PTzAweDBPTzAwMDAwMDBbMF0uc3BsaXQoJ2NoYW5uZWxcdTAwMkYnKQogICAgT08wMHgwMDAwME9PMDAwPU9PMDB4T08wMDAwMDAwMFsxXS5zcGxpdCgnPycpCiAgICBPMDAweDAwMDAwT09PTzA9T08wMHgwMDAwME9PMDAwWzBdCiAgICBPTzAweDBPT08wMDAwMDA9T08wMHgwT08wMDAwMDAwWzBdLnNwbGl0KCdjYXRlZ29yeUlkPScpCiAgICBPMDAweDAwMDBPT09PMDA9T08wMHgwT09PMDAwMDAwWzFdCiAgICBPMDAweDAwME9PT08wMDA9dXJsbGliMi5SZXF1ZXN0KCdodHRwczovL2FwaS5hdHJlc3BsYXllci5jb20vY2xpZW50L3YxL3Jvdy9zZWFyY2g/ZW50aXR5VHlwZT1BVFBGb3JtYXQmc2VjdGlvbkNhdGVnb3J5PXRydWUmbWFpbkNoYW5uZWxJZD0nK08wMDB4MDAwMDBPT09PMCsnJmNhdGVnb3J5SWQ9JytPMDAweDAwMDBPT09PMDArJyZzb3J0VHlwZT1BWiZzaXplPTEwMCZwYWdlPTAnKQogICAgTzAwMHgwME9PTzAwMDAwPWpzb24ubG9hZHModXJsbGliMi51cmxvcGVuKE8wMDB4MDAwT09PTzAwMCkucmVhZCgpKQogICAgTzAwMHhPT08wMDAwMDAwPVtdCiAgICBmb3IgT08wMHgwMDAwME8wMDAwIGluIE8wMDB4MDBPT08wMDAwMFsnaXRlbVJvd3MnXToKICAgICAgICBPMDAweE9PTzAwMDAwMDAuYXBwZW5kKHsiT08wMHgwMDBPT08wMDAwIjpPTzAweDAwMDAwTzAwMDBbJ2Zvcm1hdElkJ10sIk8wMDB4ME9PT09PTzAwMCI6TzAwMHgwMDAwMDBPT08wKE9PMDB4MDAwMDBPMDAwMFsndGl0bGUnXSksIk9PMDB4MDAwME9PTzAwMCI6T08wMHgwMDAwME8wMDAwWydpbWFnZSddWydwYXRoSG9yaXpvbnRhbCddLCJPTzAweDAwMDAwME9PMDAiOk8wMDB4MDAwMDAwT09PMChPTzAweDAwMDAwTzAwMDBbJ2xpbmsnXVsndXJsJ10pLCJPMDAweDBPT08wMDAwMDAiOk8wMDB4MDAwMDAwTzAwMChPTzAweDAwMDAwTzAwMDBbJ3RpdGxlJ10pLmxvd2VyKCl9KQogICAgTzAwMHgwMDBPT08wMDAwPWludChPMDAweDAwT09PMDAwMDBbJ3BhZ2VJbmZvJ11bJ3RvdGFsUGFnZXMnXSkKICAgIGlmIE8wMDB4MDAwT09PMDAwMD4wOgogICAgICAgIGZvciBPTzAweDAwMDAwMDBPT08gaW4gcmFuZ2UoMSxPMDAweDAwME9PTzAwMDApOgogICAgICAgICAgICBPMDAweDAwME9PT08wMDA9dXJsbGliMi5SZXF1ZXN0KCdodHRwczovL2FwaS5hdHJlc3BsYXllci5jb20vY2xpZW50L3YxL3Jvdy9zZWFyY2g/ZW50aXR5VHlwZT1BVFBGb3JtYXQmc2VjdGlvbkNhdGVnb3J5PXRydWUmbWFpbkNoYW5uZWxJZD0nK08wMDB4MDAwMDBPT09PMCsnJmNhdGVnb3J5SWQ9JytPMDAweDAwMDBPT09PMDArJyZzb3J0VHlwZT1BWiZzaXplPTEwMCZwYWdlPScrc3RyKE9PMDB4MDAwMDAwME9PTykpCiAgICAgICAgICAgIE8wMDB4MDBPT08wMDAwMD1qc29uLmxvYWRzKHVybGxpYjIudXJsb3BlbihPMDAweDAwME9PT08wMDApLnJlYWQoKSkKICAgICAgICAgICAgZm9yIE9PMDB4MDAwMDBPMDAwMCBpbiBPMDAweDAwT09PMDAwMDBbJ2l0ZW1Sb3dzJ106CiAgICAgICAgICAgICAgICBPMDAweE9PTzAwMDAwMDAuYXBwZW5kKHsiT08wMHgwMDBPT08wMDAwIjpPTzAweDAwMDAwTzAwMDBbJ2Zvcm1hdElkJ10sIk8wMDB4ME9PT09PTzAwMCI6TzAwMHgwMDAwMDBPT08wKE9PMDB4MDAwMDBPMDAwMFsndGl0bGUnXSksIk9PMDB4MDAwME9PTzAwMCI6T08wMHgwMDAwME8wMDAwWydpbWFnZSddWydwYXRoSG9yaXpvbnRhbCddLCJPTzAweDAwMDAwME9PMDAiOk8wMDB4MDAwMDAwT09PMChPTzAweDAwMDAwTzAwMDBbJ2xpbmsnXVsndXJsJ10pLCJPMDAweDBPT08wMDAwMDAiOk8wMDB4MDAwMDAwTzAwMChPTzAweDAwMDAwTzAwMDBbJ3RpdGxlJ10pLmxvd2VyKCl9KQogICAgTzAwMHhPT08wMDAwMDAwPXNvcnRlZChPMDAweE9PTzAwMDAwMDAsa2V5PWxhbWJkYSBpOmlbJ08wMDB4ME9PTzAwMDAwMCddLHJldmVyc2U9RmFsc2UpCiAgICBmb3IgT08wMHgwMDAwME8wMDAwIGluIE8wMDB4T09PMDAwMDAwMDoKICAgICAgICBPMDAweDAwT08wMDAwMDA9TzAwMHgwT08wMDAwMDAwKHsnTzAwMHhPT09PT08wMDAwJzonT08wMHhPT08wMDAwMDAwJywnTzAwMHgwT09PT09PMDAwJzpPTzAweDAwMDAwTzAwMDBbJ08wMDB4ME9PT09PTzAwMCddLCdPTzAweDAwMDAwME9PMDAnOk9PMDB4MDAwMDBPMDAwMFsnT08wMHgwMDAwMDBPTzAwJ10sJ09PMDB4MDAwT09PMDAwMCc6T08wMHgwMDAwME8wMDAwWydPTzAweDAwME9PTzAwMDAnXX0pCiAgICAgICAgT08wMHgwMDAwMDAwT08wPXhibWNndWkuTGlzdEl0ZW0oT08wMHgwMDAwME8wMDAwWydPMDAweDBPT09PT08wMDAnXSxpY29uSW1hZ2U9T08wMHgwMDAwME8wMDAwWydPTzAweDAwMDBPT08wMDAnXSkKICAgICAgICBPTzAweDAwMDAwMDBPTzAuc2V0SW5mbyh0eXBlPSJWaWRlbyIsaW5mb0xhYmVscz17InBsb3QiOk9PMDB4MDAwMDBPMDAwMFsnTzAwMHgwT09PT09PMDAwJ119KQogICAgICAgIE9PMDB4MDAwMDAwME9PMC5zZXRBcnQoeydmYW5hcnQnOk9PMDB4MDAwMDBPMDAwMFsnT08wMHgwMDAwT09PMDAwJ119KQogICAgICAgIHhibWNwbHVnaW4uYWRkRGlyZWN0b3J5SXRlbShoYW5kbGU9TzAwMHgwMDBPT09PT09PLHVybD1PMDAweDAwT08wMDAwMDAsbGlzdGl0ZW09T08wMHgwMDAwMDAwT08wLGlzRm9sZGVyPVRydWUpCiAgICB4Ym1jcGx1Z2luLmVuZE9mRGlyZWN0b3J5KE8wMDB4MDAwT09PT09PTykKZWxpZiBPMDAweE9PT09PTzAwMDBbMF09PSdPTzAweE9PTzAwMDAwMDAnOgogICAgTzAwMHgwMDBPT09PMDAwPXVybGxpYjIuUmVxdWVzdCgnaHR0cHM6Ly9hcGkuYXRyZXNwbGF5ZXIuY29tL2NsaWVudC92MS9yb3cvc2VhcmNoP2VudGl0eVR5cGU9QVRQRXBpc29kZSZmb3JtYXRJZD0nK09PMDB4MDAwMDAwMDBPMFsnT08wMHgwMDBPT08wMDAwJ11bMF0rJyZzaXplPTEwMCZwYWdlPTAnKQogICAgT08wMHgwMDBPMDAwMDAwPXVybGxpYjIudXJsb3BlbihPMDAweDAwME9PT08wMDApLnJlYWQoKQogICAgT08wMHgwMDAwTzAwMDAwPWpzb24ubG9hZHMoT08wMHgwMDBPMDAwMDAwKQogICAgT08wMHgwME8wMDAwMDAwPVtdCiAgICBpZiAnaXRlbVJvd3MnIGluIE9PMDB4MDAwME8wMDAwMDoKICAgICAgICBmb3IgT08wMHgwMDAwME8wMDAwIGluIE9PMDB4MDAwME8wMDAwMFsnaXRlbVJvd3MnXToKICAgICAgICAgICAgT08wMHgwMDAwMDBPT08wPScnCiAgICAgICAgICAgIGlmICd0YWdUeXBlJyBpbiBPTzAweDAwMDAwTzAwMDA6CiAgICAgICAgICAgICAgICBPTzAweDAwMDAwME9PTzA9J1tQXScKICAgICAgICAgICAgT08wMHgwME8wMDAwMDAwLmFwcGVuZCh7Ik8wMDB4ME9PT09PTzAwMCI6TzAwMHgwMDAwMDBPT08wKE9PMDB4MDAwMDBPMDAwMFsndGl0bGUnXSksIk9PMDB4MDAwMDBPT08wMCI6TzAwMHgwMDAwMDBPT08wKE9PMDB4MDAwMDBPMDAwMFsnc3ViVGl0bGUnXSksIk9PMDB4MDAwME9PTzAwMCI6T08wMHgwMDAwME8wMDAwWydpbWFnZSddWydwYXRoSG9yaXpvbnRhbCddLCJPTzAweDAwMDAwME9PMDAiOk8wMDB4MDAwMDAwT09PMChPTzAweDAwMDAwTzAwMDBbJ2xpbmsnXVsndXJsJ10pLCJPMDAweE9PT09PT08wMDAiOk9PMDB4MDAwMDAwT09PMH0pCiAgICAgICAgTzAwMHgwMDBPT08wMDAwPWludChPTzAweDAwMDBPMDAwMDBbJ3BhZ2VJbmZvJ11bJ3RvdGFsUGFnZXMnXSkKICAgICAgICBpZiBPMDAweDAwME9PTzAwMDA+MDoKICAgICAgICAgICAgZm9yIE9PMDB4MDAwMDAwME9PTyBpbiByYW5nZSgxLE8wMDB4MDAwT09PMDAwMCk6CiAgICAgICAgICAgICAgICBPMDAweDAwME9PT08wMDA9dXJsbGliMi5SZXF1ZXN0KCdodHRwczovL2FwaS5hdHJlc3BsYXllci5jb20vY2xpZW50L3YxL3Jvdy9zZWFyY2g/ZW50aXR5VHlwZT1BVFBFcGlzb2RlJmZvcm1hdElkPScrT08wMHgwMDAwMDAwME8wWydPTzAweDAwME9PTzAwMDAnXVswXSsnJnNpemU9MTAwJnBhZ2U9JytzdHIoT08wMHgwMDAwMDAwT09PKSkKICAgICAgICAgICAgICAgIE9PMDB4MDAwME8wMDAwMD1qc29uLmxvYWRzKHVybGxpYjIudXJsb3BlbihPMDAweDAwME9PT08wMDApLnJlYWQoKSkKICAgICAgICAgICAgICAgIGZvciBPTzAweDAwMDAwTzAwMDAgaW4gT08wMHgwMDAwTzAwMDAwWydpdGVtUm93cyddOgogICAgICAgICAgICAgICAgICAgIE9PMDB4MDAwMDAwT09PMD0nJwogICAgICAgICAgICAgICAgICAgIGlmICd0YWdUeXBlJyBpbiBPTzAweDAwMDAwTzAwMDA6CiAgICAgICAgICAgICAgICAgICAgICAgIE9PMDB4MDAwMDAwT09PMD0nW1BdJwogICAgICAgICAgICAgICAgICAgIE9PMDB4MDBPMDAwMDAwMC5hcHBlbmQoeyJPMDAweDBPT09PT08wMDAiOk8wMDB4MDAwMDAwT09PMChPTzAweDAwMDAwTzAwMDBbJ3RpdGxlJ10pLCJPTzAweDAwMDAwT09PMDAiOk8wMDB4MDAwMDAwT09PMChPTzAweDAwMDAwTzAwMDBbJ3N1YlRpdGxlJ10pLCJPTzAweDAwMDBPT08wMDAiOk9PMDB4MDAwMDBPMDAwMFsnaW1hZ2UnXVsncGF0aEhvcml6b250YWwnXSwiT08wMHgwMDAwMDBPTzAwIjpPMDAweDAwMDAwME9PTzAoT08wMHgwMDAwME8wMDAwWydsaW5rJ11bJ3VybCddKSwiTzAwMHhPT09PT09PMDAwIjpPTzAweDAwMDAwME9PTzB9KQogICAgICAgIGZvciBPTzAweDAwMDAwTzAwMDAgaW4gT08wMHgwME8wMDAwMDAwOgogICAgICAgICAgICBPMDAweDAwT08wMDAwMDA9TzAwMHgwT08wMDAwMDAwKHsnTzAwMHhPT09PT08wMDAwJzonT08wMHgwTzAwMDAwMDAwJywnTzAwMHgwT09PT09PMDAwJzpPTzAweDAwMDAwTzAwMDBbJ08wMDB4ME9PT09PTzAwMCddLCdPTzAweDAwMDAwME9PMDAnOk9PMDB4MDAwMDBPMDAwMFsnT08wMHgwMDAwMDBPTzAwJ10sJ09PMDB4MDAwME9PTzAwMCc6T08wMHgwMDAwME8wMDAwWydPTzAweDAwMDBPT08wMDAnXX0pCiAgICAgICAgICAgIE9PMDB4MDAwMDAwME9PMD14Ym1jZ3VpLkxpc3RJdGVtKE9PMDB4MDAwMDBPMDAwMFsnTzAwMHgwT09PT09PMDAwJ10saWNvbkltYWdlPU9PMDB4MDAwMDBPMDAwMFsnT08wMHgwMDAwT09PMDAwJ10pCiAgICAgICAgICAgIE9PMDB4MDAwMDAwME9PMC5zZXRJbmZvKHR5cGU9IlZpZGVvIixpbmZvTGFiZWxzPXsicGxvdCI6T08wMHgwMDAwME8wMDAwWydPMDAweDBPT09PT08wMDAnXX0pCiAgICAgICAgICAgIE9PMDB4MDAwMDAwME9PMC5zZXRBcnQoeydmYW5hcnQnOk9PMDB4MDAwMDBPMDAwMFsnT08wMHgwMDAwT09PMDAwJ119KQogICAgICAgICAgICB4Ym1jcGx1Z2luLmFkZERpcmVjdG9yeUl0ZW0oaGFuZGxlPU8wMDB4MDAwT09PT09PTyx1cmw9TzAwMHgwME9PMDAwMDAwLGxpc3RpdGVtPU9PMDB4MDAwMDAwME9PMCxpc0ZvbGRlcj1UcnVlKQogICAgICAgIHhibWNwbHVnaW4uZW5kT2ZEaXJlY3RvcnkoTzAwMHgwMDBPT09PT09PKQogICAgZWxzZToKICAgICAgICB4Ym1jLmV4ZWN1dGVidWlsdGluKCdYQk1DLk5vdGlmaWNhdGlvbiglcywlcywlcywlcyknICUgKCdObyBoYXkgdmlkZW9zJywnTm8gc2UgaGFuIGVuY29udHJhZG8gdmlkZW9zIHBhcmEgZXN0ZSBwcm9ncmFtYScsNDAwMCxPMDAweDBPT09PT09PTzArJy9pY29uLnBuZycpKQplbGlmIE8wMDB4T09PT09PMDAwMFswXT09J09PMDB4ME8wMDAwMDAwMCc6CiAgICBPTzAweE8wMDAwMDAwMDA9TzAwMHgwT09PT08wMDAwKCdodHRwczovL3d3dy5hdHJlc3BsYXllci5jb20nK09PMDB4MDAwMDAwMDBPMFsnT08wMHgwMDAwMDBPTzAwJ11bMF0sMCkKICAgIE8wMDAweDAwT08wMDAwMD1PMDAwMHgwMDAwMDAwMDAoJ2h0dHBzOi8vd3d3LmF0cmVzcGxheWVyLmNvbScrT08wMHgwMDAwMDAwME8wWydPTzAweDAwMDAwME9PMDAnXVswXSkKICAgIGlmIGxlbihPMDAwMHgwME9PMDAwMDApPT0wIGFuZCBsZW4oT08wMHhPMDAwMDAwMDAwKT09MDoKICAgICAgICB4Ym1jLmV4ZWN1dGVidWlsdGluKCdYQk1DLk5vdGlmaWNhdGlvbiglcywlcywlcywlcyknICUgKCdWaWRlbyBubyBhY2Nlc2libGUnLCJQdWVkZSBxdWUgc2VhIG11eSBudWV2byBvIHF1ZSBhdW4gbm8gc2UgaGF5YSBlbWl0aWRvLiBQcnVlYmEgbWFzIGFkZWxhbnRlLiIsMTUwMDAsTzAwMHgwT09PT09PT08wKycvaWNvbi5wbmcnKSkKICAgIGVsc2U6CiAgICAgICAgaWYgbGVuKE8wMDAweDAwT08wMDAwMCkgPiAwOgogICAgICAgICAgICBmb3IgTzAwMDB4MDAwTzAwMDAwIGluIHJhbmdlKDAsbGVuKE8wMDAweDAwT08wMDAwMCkpOgogICAgICAgICAgICAJaWYgJy5tM3U4JyBpbiBPMDAwMHgwME9PMDAwMDBbTzAwMDB4MDAwTzAwMDAwXVsnTzAwMDB4MDAwMDAwT08wJ106CiAgICAgICAgICAgIAkJTzAwMHgwT09PT09PTzAwPXhibWNndWkuTGlzdEl0ZW0oJ0RpcmVjdG8gfCBbQl0nK09PMDB4MDAwMDAwMDBPMFsnTzAwMHgwT09PT09PMDAwJ11bMF0rJ1svQl0nLGljb25JbWFnZT1PTzAweDAwMDAwMDAwTzBbJ09PMDB4MDAwME9PTzAwMCddWzBdKQogICAgICAgICAgICAJCU8wMDB4ME9PT09PT08wMC5zZXRMYWJlbCgnRGlyZWN0byB8IFtCXScrT08wMHgwMDAwMDAwME8wWydPMDAweDBPT09PT08wMDAnXVswXSsnWy9CXScpCiAgICAgICAgICAgIAkJTzAwMHgwT09PT09PTzAwLnNldEluZm8odHlwZT0iVmlkZW8iLGluZm9MYWJlbHM9eyJwbG90IjpPTzAweDAwMDAwMDAwTzBbJ08wMDB4ME9PT09PTzAwMCddWzBdLCdUaXRsZSc6T08wMHgwMDAwMDAwME8wWydPMDAweDBPT09PT08wMDAnXVswXX0pCiAgICAgICAgICAgIAkJTzAwMHgwT09PT09PTzAwLnNldEFydCh7J2ZhbmFydCc6T08wMHgwMDAwMDAwME8wWydPTzAweDAwMDBPT08wMDAnXVswXX0pCiAgICAgICAgICAgIAkJTzAwMHgwT09PT09PTzAwLnNldFByb3BlcnR5KCJJc1BsYXlhYmxlIiwidHJ1ZSIpCiAgICAgICAgICAgIAkJeGJtY3BsdWdpbi5hZGREaXJlY3RvcnlJdGVtKGhhbmRsZT1PMDAweDAwME9PT09PT08sdXJsPU8wMDAweDAwT08wMDAwMFtPMDAwMHgwMDBPMDAwMDBdWydPMDAwMHgwMDAwMDBPTzAnXSxsaXN0aXRlbT1PMDAweDBPT09PT09PMDAsaXNGb2xkZXI9RmFsc2UpCiAgICAgICAgICAgIAllbGlmICcubXBkJyBpbiBPMDAwMHgwME9PMDAwMDBbTzAwMDB4MDAwTzAwMDAwXVsnTzAwMDB4MDAwMDAwT08wJ106CiAgICAgICAgICAgIAkJTzAwMHgwT09PT09PTzAwPXhibWNndWkuTGlzdEl0ZW0oJ0F1dG8gfCBbQl0nK09PMDB4MDAwMDAwMDBPMFsnTzAwMHgwT09PT09PMDAwJ11bMF0rJ1svQl0nLGljb25JbWFnZT1PTzAweDAwMDAwMDAwTzBbJ09PMDB4MDAwME9PTzAwMCddWzBdKQogICAgICAgICAgICAJCU8wMDB4ME9PT09PT08wMC5zZXRMYWJlbCgnQXV0byB8IFtCXScrT08wMHgwMDAwMDAwME8wWydPMDAweDBPT09PT08wMDAnXVswXSsnWy9CXScpCiAgICAgICAgICAgIAkJTzAwMHgwT09PT09PTzAwLnNldEluZm8odHlwZT0iVmlkZW8iLGluZm9MYWJlbHM9eyJwbG90IjpPTzAweDAwMDAwMDAwTzBbJ08wMDB4ME9PT09PTzAwMCddWzBdLCdUaXRsZSc6T08wMHgwMDAwMDAwME8wWydPMDAweDBPT09PT08wMDAnXVswXX0pCiAgICAgICAgICAgIAkJTzAwMHgwT09PT09PTzAwLnNldEFydCh7J2ZhbmFydCc6T08wMHgwMDAwMDAwME8wWydPTzAweDAwMDBPT08wMDAnXVswXX0pCiAgICAgICAgICAgIAkJTzAwMHgwT09PT09PTzAwLnNldFByb3BlcnR5KCJJc1BsYXlhYmxlIiwidHJ1ZSIpCiAgICAgICAgICAgIAkJTzAwMHgwT09PT09PTzAwLnNldFByb3BlcnR5KCdpbnB1dHN0cmVhbWFkZG9uJywnaW5wdXRzdHJlYW0uYWRhcHRpdmUnKQogICAgICAgICAgICAJCU8wMDB4ME9PT09PT08wMC5zZXRQcm9wZXJ0eSgnaW5wdXRzdHJlYW0uYWRhcHRpdmUubWFuaWZlc3RfdHlwZScsJ21wZCcpCiAgICAgICAgICAgIAkJTzAwMHgwT09PT09PTzAwLnNldE1pbWVUeXBlKCdhcHBsaWNhdGlvbi9kYXNoK3htbCcpCiAgICAgICAgICAgIAkJTzAwMHgwT09PT09PTzAwLnNldENvbnRlbnRMb29rdXAoRmFsc2UpCiAgICAgICAgICAgIAkJeGJtY3BsdWdpbi5hZGREaXJlY3RvcnlJdGVtKGhhbmRsZT1PMDAweDAwME9PT09PT08sdXJsPU8wMDAweDAwT08wMDAwMFtPMDAwMHgwMDBPMDAwMDBdWydPMDAwMHgwMDAwMDBPTzAnXSxsaXN0aXRlbT1PMDAweDBPT09PT09PMDAsaXNGb2xkZXI9RmFsc2UpCiAgICAgICAgICAgIAllbHNlOgogICAgICAgICAgICAJCU8wMDAweDAwMDAwME9PMD1PMDAweDBPTzAwMDAwMDAoeydPMDAweE9PT09PTzAwMDAnOidPMDAwMHgwT08wMDAwMDAnLCdPMDAwMHhPTzAwMDAwMDAnOk8wMDAweDAwT08wMDAwMFtPMDAwMHgwMDBPMDAwMDBdWydPMDAwMHgwMDAwMDBPTzAnXSwnTzAwMDB4MDAwMDAwT09PJzpPTzAweDAwMDAwMDAwTzBbJ08wMDB4ME9PT09PTzAwMCddWzBdfSkKICAgICAgICAgICAgCQlPMDAweDBPT09PT09PMDA9eGJtY2d1aS5MaXN0SXRlbSgnRGlyZWN0byB8IFtCXScrT08wMHgwMDAwMDAwME8wWydPMDAweDBPT09PT08wMDAnXVswXSsnWy9CXScsaWNvbkltYWdlPU9PMDB4MDAwMDAwMDBPMFsnT08wMHgwMDAwT09PMDAwJ11bMF0pCiAgICAgICAgICAgIAkJTzAwMHgwT09PT09PTzAwLnNldExhYmVsKCdEaXJlY3RvIHwgW0JdJytPTzAweDAwMDAwMDAwTzBbJ08wMDB4ME9PT09PTzAwMCddWzBdKydbL0JdJykKICAgICAgICAgICAgCQlPMDAweDBPT09PT09PMDAuc2V0SW5mbyh0eXBlPSJWaWRlbyIsaW5mb0xhYmVscz17InBsb3QiOk9PMDB4MDAwMDAwMDBPMFsnTzAwMHgwT09PT09PMDAwJ11bMF0sJ1RpdGxlJzpPTzAweDAwMDAwMDAwTzBbJ08wMDB4ME9PT09PTzAwMCddWzBdfSkKICAgICAgICAgICAgCQlPMDAweDBPT09PT09PMDAuc2V0QXJ0KHsnZmFuYXJ0JzpPTzAweDAwMDAwMDAwTzBbJ09PMDB4MDAwME9PTzAwMCddWzBdfSkKICAgICAgICAgICAgCQl4Ym1jcGx1Z2luLmFkZERpcmVjdG9yeUl0ZW0oaGFuZGxlPU8wMDB4MDAwT09PT09PTyx1cmw9TzAwMDB4MDAwMDAwT08wLGxpc3RpdGVtPU8wMDB4ME9PT09PT08wMCxpc0ZvbGRlcj1UcnVlKQogICAgICAgIE8wMDB4ME9PT08wMDAwMD17J08wMDB4MDBPT09PT09PTyc6JycsJ08wMDB4T09PT09PT09PTyc6JycsJ09PMDB4MDAwT08wMDAwMCc6Jyd9CiAgICAgICAgZm9yIE9PMDB4MDAwME9PMDAwMCBpbiBPTzAweE8wMDAwMDAwMDA6CiAgICAgICAgICAgIGlmIE9PMDB4MDAwME9PMDAwMFsnTzAwMHgwMDAwMDAwME9PJ109PSdPMDAweDAwT09PT09PT08nOgogICAgICAgICAgICAgICAgTzAwMHgwT09PTzAwMDAwWydPMDAweDAwT09PT09PT08nXT1PTzAweDAwMDBPTzAwMDBbJ08wMDB4MDBPTzAwMDAwMCddCiAgICAgICAgICAgIGlmIE9PMDB4MDAwME9PMDAwMFsnTzAwMHgwMDAwMDAwME9PJ109PSdPMDAweE9PT09PT09PT08nOgogICAgICAgICAgICAgICAgTzAwMHgwT09PTzAwMDAwWydPMDAweE9PT09PT09PT08nXT1PTzAweDAwMDBPTzAwMDBbJ08wMDB4MDBPTzAwMDAwMCddCiAgICAgICAgICAgIGlmIE9PMDB4MDAwME9PMDAwMFsnTzAwMHgwMDAwMDAwME9PJ109PSdPTzAweDAwME9PMDAwMDAnOgogICAgICAgICAgICAgICAgTzAwMHgwT09PTzAwMDAwWydPTzAweDAwME9PMDAwMDAnXT1PTzAweDAwMDBPTzAwMDBbJ08wMDB4MDBPTzAwMDAwMCddCiAgICAgICAgaWYgTzAwMHgwT09PTzAwMDAwWydPMDAweDAwT09PT09PT08nXSE9Jyc6CiAgICAgICAgICAgIE8wMDB4ME9PT09PT08wMD14Ym1jZ3VpLkxpc3RJdGVtKCdEaXJlY3RvIHwgW0JdJytPTzAweDAwMDAwMDAwTzBbJ08wMDB4ME9PT09PTzAwMCddWzBdKydbL0JdJyxpY29uSW1hZ2U9T08wMHgwMDAwMDAwME8wWydPTzAweDAwMDBPT08wMDAnXVswXSkKICAgICAgICAgICAgTzAwMHgwT09PT09PTzAwLnNldExhYmVsKCdEaXJlY3RvIHwgW0JdJytPTzAweDAwMDAwMDAwTzBbJ08wMDB4ME9PT09PTzAwMCddWzBdKydbL0JdJykKICAgICAgICAgICAgTzAwMHgwT09PT09PTzAwLnNldEluZm8odHlwZT0iVmlkZW8iLGluZm9MYWJlbHM9eyJwbG90IjpPTzAweDAwMDAwMDAwTzBbJ08wMDB4ME9PT09PTzAwMCddWzBdLCdUaXRsZSc6T08wMHgwMDAwMDAwME8wWydPMDAweDBPT09PT08wMDAnXVswXX0pCiAgICAgICAgICAgIE8wMDB4ME9PT09PT08wMC5zZXRBcnQoeydmYW5hcnQnOk9PMDB4MDAwMDAwMDBPMFsnT08wMHgwMDAwT09PMDAwJ11bMF19KQogICAgICAgICAgICBPMDAweDBPT09PT09PMDAuc2V0UHJvcGVydHkoIklzUGxheWFibGUiLCJ0cnVlIikKICAgICAgICAgICAgeGJtY3BsdWdpbi5hZGREaXJlY3RvcnlJdGVtKGhhbmRsZT1PMDAweDAwME9PT09PT08sdXJsPU8wMDB4ME9PT08wMDAwMFsnTzAwMHgwME9PT09PT09PJ10sbGlzdGl0ZW09TzAwMHgwT09PT09PTzAwLGlzRm9sZGVyPUZhbHNlKQogICAgICAgIGlmIE8wMDB4ME9PT08wMDAwMFsnTzAwMHhPT09PT09PT09PJ10hPScnOgogICAgICAgICAgICBPMDAweDBPT09PT09PMDA9eGJtY2d1aS5MaXN0SXRlbSgnQXV0byB8IFtCXScrT08wMHgwMDAwMDAwME8wWydPMDAweDBPT09PT08wMDAnXVswXSsnWy9CXScsaWNvbkltYWdlPU9PMDB4MDAwMDAwMDBPMFsnT08wMHgwMDAwT09PMDAwJ11bMF0pCiAgICAgICAgICAgIE8wMDB4ME9PT09PT08wMC5zZXRMYWJlbCgnQXV0byB8IFtCXScrT08wMHgwMDAwMDAwME8wWydPMDAweDBPT09PT08wMDAnXVswXSsnWy9CXScpCiAgICAgICAgICAgIE8wMDB4ME9PT09PT08wMC5zZXRJbmZvKHR5cGU9IlZpZGVvIixpbmZvTGFiZWxzPXsicGxvdCI6T08wMHgwMDAwMDAwME8wWydPMDAweDBPT09PT08wMDAnXVswXSwnVGl0bGUnOk9PMDB4MDAwMDAwMDBPMFsnTzAwMHgwT09PT09PMDAwJ11bMF19KQogICAgICAgICAgICBPMDAweDBPT09PT09PMDAuc2V0QXJ0KHsnZmFuYXJ0JzpPTzAweDAwMDAwMDAwTzBbJ09PMDB4MDAwME9PTzAwMCddWzBdfSkKICAgICAgICAgICAgTzAwMHgwT09PT09PTzAwLnNldFByb3BlcnR5KCJJc1BsYXlhYmxlIiwidHJ1ZSIpCiAgICAgICAgICAgIE8wMDB4ME9PT09PT08wMC5zZXRQcm9wZXJ0eSgnaW5wdXRzdHJlYW1hZGRvbicsJ2lucHV0c3RyZWFtLmFkYXB0aXZlJykKICAgICAgICAgICAgTzAwMHgwT09PT09PTzAwLnNldFByb3BlcnR5KCdpbnB1dHN0cmVhbS5hZGFwdGl2ZS5tYW5pZmVzdF90eXBlJywnbXBkJykKICAgICAgICAgICAgTzAwMHgwT09PT09PTzAwLnNldE1pbWVUeXBlKCdhcHBsaWNhdGlvbi9kYXNoK3htbCcpCiAgICAgICAgICAgIE8wMDB4ME9PT09PT08wMC5zZXRDb250ZW50TG9va3VwKEZhbHNlKQogICAgICAgICAgICB4Ym1jcGx1Z2luLmFkZERpcmVjdG9yeUl0ZW0oaGFuZGxlPU8wMDB4MDAwT09PT09PTyx1cmw9TzAwMHgwT09PTzAwMDAwWydPMDAweE9PT09PT09PT08nXSxsaXN0aXRlbT1PMDAweDBPT09PT09PMDAsaXNGb2xkZXI9RmFsc2UpCiAgICAgICAgaWYgTzAwMHgwT09PTzAwMDAwWydPTzAweDAwME9PMDAwMDAnXSE9Jyc6CiAgICAgICAgICAgIE8wMDB4MDBPT09PMDAwMD1yZXF1ZXN0cy5nZXQoTzAwMHgwT09PTzAwMDAwWydPTzAweDAwME9PMDAwMDAnXSkudGV4dAogICAgICAgICAgICBpZiAnYml0cmF0ZT0iJyBpbiBPMDAweDAwT09PTzAwMDA6CiAgICAgICAgICAgICAgICBPTzAweDAwMDAwMDAwMDA9W10KICAgICAgICAgICAgICAgIE9PMDB4MDAwMDAwMDBPTz1mNG1Qcm94eUhlbHBlcigpCiAgICAgICAgICAgICAgICBPMDAweDAwT09PT09PTzAsTzAwMHgwT09PT09PTzAwPU9PMDB4MDAwMDAwMDBPTy5wbGF5RjRtTGluayhPMDAweDBPT09PMDAwMDBbJ09PMDB4MDAwT08wMDAwMCddLE9PMDB4MDAwMDAwMDBPMFsnTzAwMHgwT09PT09PMDAwJ11bMF0sTm9uZSxUcnVlLDAsRmFsc2UsJycsJ0hEUycsVHJ1ZSxOb25lLCcnLCcnLE9PMDB4MDAwMDAwMDBPMFsnT08wMHgwMDAwT09PMDAwJ11bMF0pCiAgICAgICAgICAgICAgICBPMDAweDBPT09PT09PMDAuc2V0UHJvcGVydHkoIklzUGxheWFibGUiLCJ0cnVlIikKICAgICAgICAgICAgICAgIE9PMDB4ME9PMDAwMDAwMD1PMDAweDAwT09PTzAwMDAuc3BsaXQoJ2JpdHJhdGU9IicpCiAgICAgICAgICAgICAgICBPTzAweDAwMDAwMDBPMDA9TzAwMHgwT09PT09PTzAwLmdldExhYmVsKCkuZGVjb2RlKCd1dGY4JykKICAgICAgICAgICAgICAgIGZvciBPTzAweDAwT09PMDAwMDAgaW4gcmFuZ2UoMSxsZW4oT08wMHgwT08wMDAwMDAwKSk6CiAgICAgICAgICAgICAgICAgICAgT08wMHhPTzAwMDAwMDAwPU9PMDB4ME9PMDAwMDAwMFtPTzAweDAwT09PMDAwMDBdLnNwbGl0KCciJykKICAgICAgICAgICAgICAgICAgICBPTzAweDAwMDAwMDAwMDAuYXBwZW5kKHsnT08wMHgwMDAwMDBPMDAwJzppbnQoT08wMHhPTzAwMDAwMDAwWzBdKX0pCiAgICAgICAgICAgICAgICBPTzAweDAwMDAwMDAwMDA9c29ydGVkKE9PMDB4MDAwMDAwMDAwMCxrZXk9bGFtYmRhIE9PMDB4MDBPT08wMDAwMDpPTzAweDAwT09PMDAwMDBbJ09PMDB4MDAwMDAwTzAwMCddLHJldmVyc2U9VHJ1ZSkKICAgICAgICAgICAgICAgIGZvciBPTzAweDAwMDAwMDAwME8gaW4gT08wMHgwMDAwMDAwMDAwOgogICAgICAgICAgICAgICAgICAgIE8wMDB4ME9PT09PT08wMC5zZXRMYWJlbCgnRjRNIHwgJytzdHIoT08wMHgwMDAwMDAwMDBPWydPTzAweDAwMDAwME8wMDAnXSkrJyBrYnBzIHwgW0JdJytPTzAweDAwMDAwMDBPMDArJ1svQl0nKQogICAgICAgICAgICAgICAgICAgIE8wMDB4ME9PT09PT08wMC5zZXRJbmZvKHR5cGU9IlZpZGVvIixpbmZvTGFiZWxzPXsicGxvdCI6T08wMHgwMDAwMDAwME8wWydPMDAweDBPT09PT08wMDAnXVswXSwnVGl0bGUnOk9PMDB4MDAwMDAwMDBPMFsnTzAwMHgwT09PT09PMDAwJ11bMF19KQogICAgICAgICAgICAgICAgICAgIE8wMDB4ME9PT09PT08wMC5zZXRBcnQoeydmYW5hcnQnOk9PMDB4MDAwMDAwMDBPMFsnT08wMHgwMDAwT09PMDAwJ11bMF19KQogICAgICAgICAgICAgICAgICAgIE8wMDB4ME9PT09PT08wMC5zZXRQcm9wZXJ0eSgiSXNQbGF5YWJsZSIsInRydWUiKQogICAgICAgICAgICAgICAgICAgIHhibWNwbHVnaW4uYWRkRGlyZWN0b3J5SXRlbShoYW5kbGU9TzAwMHgwMDBPT09PT09PLHVybD1PMDAweDAwT09PT09PTzAucmVwbGFjZSgnbWF4Yml0cmF0ZT0wJywnbWF4Yml0cmF0ZT0nK3N0cihPTzAweDAwMDAwMDAwME9bJ09PMDB4MDAwMDAwTzAwMCddKSksbGlzdGl0ZW09TzAwMHgwT09PT09PTzAwLGlzRm9sZGVyPUZhbHNlKQogICAgICAgIHhibWNwbHVnaW4uZW5kT2ZEaXJlY3RvcnkoTzAwMHgwMDBPT09PT09PKQplbGlmIE8wMDB4T09PT09PMDAwMFswXT09J08wMDAweDBPTzAwMDAwMCc6CiAgICBPMDAwMHgwMDAwT08wMDA9eGJtY2d1aS5MaXN0SXRlbShPTzAweDAwMDAwMDAwTzBbJ08wMDAweDAwMDAwME9PTyddWzBdKQogICAgTzAwMDB4MDAwMDBPTzAwPScnCiAgICBpZiAnZ2Ftb3ZpZGVvJyBpbiBPTzAweDAwMDAwMDAwTzBbJ08wMDAweE9PMDAwMDAwMCddWzBdOgogICAgICAgIE8wMDAweDAwMDAwT09PMD0nTW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzczLjAuMzY4My4xMDMgU2FmYXJpLzUzNy4zNicKICAgICAgICBPMDAwMHgwMDAwT09PMDA9cmVxdWVzdHMuc2Vzc2lvbigpCiAgICAgICAgTzAwMDB4MDAwT09PMDAwPU8wMDAweDAwMDBPT08wMC5nZXQoT08wMHgwMDAwMDAwME8wWydPMDAwMHhPTzAwMDAwMDAnXVswXSxoZWFkZXJzPXsnVXNlci1BZ2VudCc6TzAwMDB4MDAwMDBPT08wfSx2ZXJpZnk9RmFsc2UpCiAgICAgICAgTzAwMDB4MDBPT08wMDAwPU8wMDAweDAwMDBPT08wMC5nZXQoT08wMHgwMDAwMDAwME8wWydPMDAwMHhPTzAwMDAwMDAnXVswXSxoZWFkZXJzPXsnVXNlci1BZ2VudCc6TzAwMDB4MDAwMDBPT08wfSx2ZXJpZnk9RmFsc2UpCiAgICAgICAgTzAwMDB4T09PMDAwMDAwPXJlLmZpbmRhbGwoJ2phdmFzY3JpcHQuKj8oZXZhbFwoZnVuY3Rpb25cKHAsYSxjLGssZSxkLiopJyxPMDAwMHgwME9PTzAwMDAudGV4dClbMF0KICAgICAgICBPMDAwMHgwT09PMDAwMDA9anN1bnBhY2sudW5wYWNrKE8wMDAweE9PTzAwMDAwMCkKICAgICAgICBPMDAwMHgwMDAwME9PT089cmUuZmluZGFsbCgnKD9zKXNvdXJjZXMuKj9maWxlOlxzKiIoaHR0cC4qPykiJyxPMDAwMHgwT09PMDAwMDApWzBdKyd8VXNlci1BZ2VudD0nK08wMDAweDAwMDAwT09PMAogICAgICAgIHhibWMuUGxheWVyKCkucGxheShPMDAwMHgwMDAwME9PT08sTzAwMDB4MDAwME9PMDAwKQogICAgZWxzZToKICAgICAgICB0cnk6CiAgICAgICAgICAgIE8wMDAweDAwMDAwT08wMD11cmxyZXNvbHZlci5yZXNvbHZlKE9PMDB4MDAwMDAwMDBPMFsnTzAwMDB4T08wMDAwMDAwJ11bMF0pCiAgICAgICAgZXhjZXB0OgogICAgICAgICAgICBwYXNzCiAgICAgICAgaWYgTzAwMDB4MDAwMDBPTzAwPT0nJyBvciBPMDAwMHgwMDAwME9PMDA9PUZhbHNlOgogICAgICAgICAgICB0cnk6CiAgICAgICAgICAgICAgICBPMDAwMHgwMDAwME9PMDA9cmVzb2x2ZXVybC5yZXNvbHZlKE9PMDB4MDAwMDAwMDBPMFsnTzAwMDB4T08wMDAwMDAwJ11bMF0pCiAgICAgICAgICAgIGV4Y2VwdDoKICAgICAgICAgICAgICAgIHBhc3MKICAgICAgICBpZiBPMDAwMHgwMDAwME9PMDAhPScnIGFuZCBPMDAwMHgwMDAwME9PMDAhPUZhbHNlOgogICAgICAgICAgICB4Ym1jLlBsYXllcigpLnBsYXkoTzAwMDB4MDAwMDBPTzAwLE8wMDAweDAwMDBPTzAwMCk='))